webpackJsonp([18],{Gj5P:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("moKT"),r={mounted:function(){var t=this;this.$nextTick(function(){t.searchType=parseInt(t.$route.params.searchType),t.$store.dispatch("resetSearchResult")}),setTimeout(function(){t.$refs.searchInput.$refs.input.focus()},500)},data:function(){return{searchType:0,searchText:"",searchList:[],errMsg:"",firstEntry:!0}},watch:{searchResult:function(t,s){0!==t.length||this.firstEntry?this.errMsg="":this.errMsg="无记录",this.searchList=t},searchType:function(){this.$refs.searchInput.$refs.input.focus()}},computed:{searchResult:function(){var t=[];return 1===this.searchType?t=this.$store.state.searchedTeams.map(function(t){return t.avatar=t.avatar||a.a.defaultUserIcon,t.link="/teamcard/"+t.teamId,t}):0===this.searchType&&(t=this.$store.state.searchedUsers.map(function(t){return t.nick=t.nick||t.account,t.link="/namecard/"+t.account,t.avatar=t.avatar||a.a.defaultUserIcon,t})),t}},methods:{searchUser:function(){if(this.searchText)if(this.firstEntry=!1,1===this.searchType){if(!/^(\d){4,9}$/.test(this.searchText))return void this.$toast("输入的群号非法");this.$store.dispatch("searchTeam",{teamId:this.searchText})}else 0===this.searchType&&(this.searchText===this.$store.state.userUID?(this.searchList=[],this.errMsg="别看了，就是你自己！"):this.$store.dispatch("searchUsers",{accounts:[this.searchText]}));else this.$toast("未输入内容")}}},i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"g-inherit m-article p-search-user"},[e("x-header",{staticClass:"m-tab",attrs:{"left-options":{backText:" "}}},[e("button-tab",{staticClass:"m-tab-top",model:{value:t.searchType,callback:function(s){t.searchType=s},expression:"searchType"}},[e("button-tab-item",{staticClass:"u-tab-top"},[t._v("搜索用户")]),t._v(" "),e("button-tab-item",{staticClass:"u-tab-top"},[t._v("搜索群")])],1),t._v(" "),e("a",{attrs:{slot:"left"},slot:"left"})],1),t._v(" "),e("group",{staticClass:"u-search"},[e("search",{ref:"searchInput",staticClass:"u-ipt-default",attrs:{type:"text",required:!1,"auto-fixed":!1,placeholder:0===t.searchType?"请输入搜索内容":"请输入群号"},model:{value:t.searchText,callback:function(s){t.searchText=s},expression:"searchText"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("搜索：")])])],1),t._v(" "),e("div",[e("x-button",{attrs:{type:"primary","action-type":"button"},nativeOn:{click:function(s){return t.searchUser(s)}}},[t._v("搜索")])],1),t._v(" "),e("group",{staticClass:"u-card u-list"},t._l(t.searchList,function(s,a){return 0===t.searchType?e("cell",{key:s.account,staticClass:"u-list-item",attrs:{title:s.nick,"inline-desc":s.account,userId:a,"is-link":"",link:s.link}},[e("img",{staticClass:"icon",attrs:{slot:"icon",width:"20",src:s.avatar},slot:"icon"})]):t._l(t.searchList,function(t){return e("cell",{key:t.teamId,staticClass:"u-list-item",attrs:{title:t.name,"is-link":"",link:t.link}},[e("img",{staticClass:"icon",attrs:{slot:"icon",width:"20",src:t.avatar},slot:"icon"})])})}),1),t._v(" "),e("div",{staticClass:"u-card"},[e("h3",[t._v(t._s(t.errMsg))])])],1)},staticRenderFns:[]},c=e("VU/8")(r,i,!1,null,null,null);s.default=c.exports}});
//# sourceMappingURL=18.90b872ad4aa865176065.js.map