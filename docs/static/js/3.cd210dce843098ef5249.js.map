{"version":3,"sources":["webpack:///./src/pages/components/ChatEmoji.vue","webpack:///./src/pages/components/ChatEmoji.vue?3703","webpack:///./src/pages/components/ChatEmoji.vue?94ea","webpack:///./src/pages/components/ChatEditor.vue","webpack:///./src/pages/components/ChatEditor.vue?47dd","webpack:///./src/pages/components/ChatEditor.vue?881b","webpack:///./src/pages/Chat.vue","webpack:///./src/pages/Chat.vue?a8d7","webpack:///./src/pages/Chat.vue?6b46"],"names":["String","genEmojiList","type","emojiList","result","name","emojiMap","list","key","push","img","length","album","components_ChatEmoji","props","scene","to","data","currType","currAlbum","computed","emoji","emojiObj","pinup","pinupList","currEmoji","this","methods","selectAlbum","selectEmoji","$emit","$store","dispatch","pushContent","content","catalog","chartlet","pages_components_ChatEmoji","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","class","pinup-item","on","click","$event","stopPropagation","attrs","src","_v","active","_e","staticRenderFns","src_pages_components_ChatEmoji","__webpack_require__","normalizeComponent","ssrContext","components_ChatEditor","Boolean","components","ChatEmoji","updated","_this","window","document","body","addEventListener","isEmojiShown","isRobot","default","invalid","invalidHint","advancedTeam","watch","continueRobotAccid","curVal","oldVal","robotInfos","msgToSent","nick","indexAt","indexOf","robotslist","isRobotListShown","icon1","config","resourceUrl","icon2","icon3","state","robotInfosByNick","sendTextMsg","$toast","test","$vux","alert","show","title","trim","robotAccid","robotText","atUsers","match","i","replace","account","text","sendPlayMsg","value","Math","ceil","random","sendFileMsg","ipt","$refs","fileToSent","fileInput","showEmoji","hideEmoji","addEmoji","emojiName","chooseRobot","robot","len","hideRobotList","onInputFocus","e","setTimeout","target","scrollIntoView","pageUtil","scrollChatListDown","turnToMsgReceipt","location","pages_components_ChatEditor","directives","rawName","expression","add-emoji","hide-emoji","nativeOn","slot","width","height","avatar","domProps","focus","input","composing","change","ref","ChatEditor_Component","ChatEditor_normalizeComponent","__webpack_exports__","pages_Chat","ChatEditor","ChatList","mounted","sessionId","teamMembers","undefined","teamInfo","memberNum","destroyed","leftBtnOptions","backText","preventGoBack","$route","params","sessionName","user","userUID","userInfo","userInfos","util","getFriendAlias","members","teamId","memberCount","parseSession","myInfo","msglist","currSessionMsgs","teamlist","find","team","muteInTeam","_this2","Members","selfInTeam","mute","teamInvalid","validToCurrentUser","sendInvalidHint","onClickBack","history","go","msgsLoaded","enterNameCard","href","onTeamManageClick","onHistoryClick","selectortype_template_index_0_src_pages_Chat","left-options","on-click-back","_s","msgs-loaded","Component"],"mappings":"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","file":"static/js/3.cd210dce843098ef5249.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport emojiObj from '../../configs/emoji'\n\nfunction genEmojiList (type, emojiList) {\n  let result = {}\n  for (let name in emojiList) {\n    let emojiMap = emojiList[name]\n    let list = []\n    for (let key in emojiMap) {\n      list.push({\n        type,\n        name,\n        key,\n        img: emojiMap[key].img\n      })\n    }\n    if (list.length > 0) {\n      result[name] = {\n        type,\n        name,\n        list,\n        album: list[0].img\n      }\n    }\n  }\n  return result\n}\n\nexport default {\n  props: {\n    type: String,\n    scene: String,\n    to: String\n  },\n  data () {\n    return {\n      currType: 'emoji',\n      currAlbum: 'emoji'\n    }\n  },\n  computed: {\n    emoji () {\n      return genEmojiList('emoji', emojiObj.emojiList)\n    },\n    pinup () {\n      return genEmojiList('pinup', emojiObj.pinupList)\n    },\n    currEmoji () {\n      if (this.currType === 'emoji') {\n        return this.emoji[this.currAlbum]\n      } else if (this.currType === 'pinup') {\n        return this.pinup[this.currAlbum]\n      }\n      return []\n    }\n  },\n  methods: {\n    selectAlbum (album) {\n      this.currType = album.type\n      this.currAlbum = album.name\n    },\n    selectEmoji (emoji) {\n      if (this.currType === 'emoji') {\n        // 由触发父组件事件，增加表情文案\n        this.$emit('add-emoji', emoji.key)\n      } else if (this.currType === 'pinup') {\n        if (this.type === 'session') {\n          this.$store.dispatch('sendMsg', {\n            type: 'custom',\n            scene: this.scene,\n            to: this.to,\n            pushContent: '[贴图表情]',\n            content: {\n              type: 3,\n              data: {\n                catalog: this.currAlbum,\n                chartlet: emoji.key\n              }\n            }\n          })\n        } else if (this.type === 'chatroom') {\n          this.$store.dispatch('sendChatroomMsg', {\n            type: 'custom',\n            pushContent: '[贴图表情]',\n            content: {\n              type: 3,\n              data: {\n                catalog: this.currAlbum,\n                chartlet: emoji.key\n              }\n            }\n          })\n        }\n        this.$emit('hide-emoji')\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/ChatEmoji.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-chat-emoji\"},[_c('div',{staticClass:\"emoji-content\"},[_c('div',{staticClass:\"cnt\"},_vm._l((_vm.currEmoji.list),function(item){return _c('span',{staticClass:\"emoji-item\",class:{'pinup-item':item.type==='pinup'},on:{\"click\":function($event){$event.stopPropagation();_vm.selectEmoji(item)}}},[_c('img',{attrs:{\"src\":item.img}})])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"emoji-channel\"},[_vm._l((_vm.emoji),function(item){return _c('span',{staticClass:\"emoji-album\",class:{active: item.name==_vm.currAlbum},on:{\"click\":function($event){$event.stopPropagation();_vm.selectAlbum(item)}}},[_c('img',{attrs:{\"src\":item.album}})])}),_vm._l((_vm.pinup),function(item){return (_vm.type==='session')?_c('span',{staticClass:\"emoji-album\",class:{active: item.name==_vm.currAlbum},on:{\"click\":function($event){$event.stopPropagation();_vm.selectAlbum(item)}}},[_c('img',{attrs:{\"src\":item.album}})]):_vm._e()})],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-065c9985\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/components/ChatEmoji.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-065c9985\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatEmoji.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatEmoji.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatEmoji.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-065c9985\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatEmoji.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/components/ChatEmoji.vue\n// module id = null\n// module chunks = ","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ChatEmoji from './ChatEmoji'\nimport util from '../../utils'\nimport config from '../../configs'\nimport pageUtil from '../../utils/page'\n\nexport default {\n  components: {\n    ChatEmoji\n  },\n  updated () {\n    window.document.body.addEventListener('click', () => {\n      this.isEmojiShown = false\n    })\n  },\n  props: {\n    type: String,\n    scene: String,\n    to: String,\n    isRobot: {\n      type: Boolean,\n      default () {\n        return false\n      }\n    },\n    invalid: {\n      type: Boolean,\n      default: false\n    },\n    invalidHint: {\n      type: String,\n      default: '您无权限发送消息'\n    },\n    advancedTeam: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    continueRobotAccid (curVal, oldVal) {\n      if (curVal && this.robotInfos[curVal]) {\n        this.msgToSent = `@${this.robotInfos[curVal].nick} `\n      }\n      // 重置\n      this.$store.dispatch('continueRobotMsg', '')\n    },\n    msgToSent (curVal, oldVal) {\n      if (this.isRobot) {\n        return\n      }\n      let indexAt = this.msgToSent.indexOf('@')\n      if (indexAt >= 0 && (indexAt === this.msgToSent.length - 1)) {\n        if (this.robotslist && this.robotslist.length > 0) {\n          this.isRobotListShown = true\n        }\n      } else if (this.isRobotListShown === true) {\n        this.isRobotListShown = false\n      }\n    }\n  },\n  data () {\n    return {\n      isEmojiShown: false,\n      isRobotListShown: false,\n      msgToSent: '',\n      icon1: `${config.resourceUrl}/im/chat-editor-1.png`,\n      icon2: `${config.resourceUrl}/im/chat-editor-2.png`,\n      icon3: `${config.resourceUrl}/im/chat-editor-3.png`,\n    }\n  },\n  computed: {\n    continueRobotAccid () {\n      return this.$store.state.continueRobotAccid\n    },\n    robotslist () {\n      return this.$store.state.robotslist\n    },\n    robotInfos () {\n      return this.$store.state.robotInfos\n    },\n    robotInfosByNick () {\n      return this.$store.state.robotInfosByNick\n    }\n  },\n  methods: {\n    sendTextMsg () {\n      if (this.invalid) {\n        this.$toast(this.invalidHint)\n        return\n      }\n      if (/^\\s*$/.test(this.msgToSent)) {\n        this.$vux.alert.show({\n          title: '请不要发送空消息'\n        })\n        return\n      } else if (this.msgToSent.length > 800) {\n        this.$vux.alert.show({\n          title: '请不要超过800个字'\n        })\n        return\n      }\n      this.msgToSent = this.msgToSent.trim()\n      if (this.type === 'session') {\n        // 如果是机器人\n        if (this.isRobot) {\n          this.$store.dispatch('sendRobotMsg', {\n            type: 'text',\n            scene: this.scene,\n            to: this.to,\n            robotAccid: this.to,\n            // 机器人后台消息\n            content: this.msgToSent,\n            // 显示的文本消息\n            body: this.msgToSent\n          })\n        } else {\n          let robotAccid = ''\n          let robotText = ''\n\n          let atUsers = this.msgToSent.match(/@[^\\s@$]+/g)\n          if (atUsers) {\n            for (let i = 0; i < atUsers.length; i++) {\n              let item = atUsers[i].replace('@', '')\n              if (this.robotInfosByNick[item]) {\n                robotAccid = this.robotInfosByNick[item].account\n                robotText = (this.msgToSent + '').replace(atUsers[i], '').trim()\n                break\n              }\n            }\n          }\n          if (robotAccid) {\n            if (robotText) {\n              this.$store.dispatch('sendRobotMsg', {\n                type: 'text',\n                scene: this.scene,\n                to: this.to,\n                robotAccid,\n                // 机器人后台消息\n                content: robotText,\n                // 显示的文本消息\n                body: this.msgToSent\n              })\n            } else {\n              this.$store.dispatch('sendRobotMsg', {\n                type: 'welcome',\n                scene: this.scene,\n                to: this.to,\n                robotAccid,\n                // 显示的文本消息\n                body: this.msgToSent\n              })\n            }\n          } else {\n            this.$store.dispatch('sendMsg', {\n              type: 'text',\n              scene: this.scene,\n              to: this.to,\n              text: this.msgToSent\n            })\n          }\n        }\n      } else if (this.type === 'chatroom') {\n        let robotAccid = ''\n        let robotText = ''\n\n        let atUsers = this.msgToSent.match(/@[^\\s@$]+/g)\n        if (atUsers) {\n          for (let i = 0; i < atUsers.length; i++) {\n            let item = atUsers[i].replace('@', '')\n            if (this.robotInfosByNick[item]) {\n              robotAccid = this.robotInfosByNick[item].account\n              robotText = (this.msgToSent + '').replace(atUsers[i], '').trim()\n              break\n            }\n          }\n        }\n        if (robotAccid) {\n          if (robotText) {\n            this.$store.dispatch('sendChatroomRobotMsg', {\n              type: 'text',\n              robotAccid,\n              // 机器人后台消息\n              content: robotText,\n              // 显示的文本消息\n              body: this.msgToSent\n            })\n          } else {\n            this.$store.dispatch('sendChatroomRobotMsg', {\n              type: 'welcome',\n              robotAccid,\n              // 显示的文本消息\n              body: this.msgToSent\n            })\n          }\n        } else {\n          this.$store.dispatch('sendChatroomMsg', {\n            type: 'text',\n            text: this.msgToSent\n          })\n        }\n      }\n      this.msgToSent = ''\n    },\n    sendPlayMsg () {\n      if (this.invalid) {\n        this.$toast(this.invalidHint)\n        return\n      }\n      // 发送猜拳消息\n      if (this.type === 'session') {\n        this.$store.dispatch('sendMsg', {\n          type: 'custom',\n          scene: this.scene,\n          to: this.to,\n          pushContent: '[猜拳]',\n          content: {\n            type: 1,\n            data: {\n              value: Math.ceil(Math.random()*3)\n            }\n          }\n        })\n      } else if (this.type === 'chatroom') {\n        this.$store.dispatch('sendChatroomMsg', {\n          type: 'custom',\n          pushContent: '[猜拳]',\n          content: {\n            type: 1,\n            data: {\n              value: Math.ceil(Math.random()*3)\n            }\n          }\n        })\n      }\n    },\n    sendFileMsg () {\n      if (this.invalid) {\n        this.$toast(this.invalidHint)\n        return\n      }\n      let ipt = this.$refs.fileToSent\n      if (ipt.value) {\n        if (this.type === 'session') {\n          this.$store.dispatch('sendFileMsg', {\n            scene: this.scene,\n            to: this.to,\n            fileInput: ipt\n          })\n        } else if (this.type === 'chatroom') {\n          this.$store.dispatch('sendChatroomFileMsg', {\n            fileInput: ipt\n          })\n        }\n      }\n    },\n    showEmoji () {\n      this.isEmojiShown = true\n    },\n    hideEmoji () {\n      this.isEmojiShown = false\n    },\n    addEmoji (emojiName) {\n      this.msgToSent += emojiName\n      this.hideEmoji()\n    },\n    chooseRobot (robot) {\n      if (robot && robot.account) {\n        let len = this.msgToSent.length\n        if (len === 0 || this.msgToSent[len-1] !== '@') {\n          this.msgToSent += '@' + robot.nick + ' '\n        } {\n          this.msgToSent += robot.nick + ' '\n        }\n      }\n    },\n    hideRobotList () {\n      this.isRobotListShown = false\n    },\n    onInputFocus(e) {\n      setTimeout(() => {\n        // todo fixme 解决iOS输入框被遮挡问题，但会存在空白缝隙\n        e.target.scrollIntoView()\n        pageUtil.scrollChatListDown()\n      }, 200)\n    },\n    turnToMsgReceipt() {\n      if (this.invalid) {\n        this.$toast(this.invalidHint)\n        return\n      }\n      location = `#/teamSendMsgReceipt/${this.to}`\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/ChatEditor.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-chat-editor\",on:{\"click\":_vm.hideRobotList}},[_c('chat-emoji',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEmojiShown),expression:\"isEmojiShown\"}],attrs:{\"type\":_vm.type,\"scene\":_vm.scene,\"to\":_vm.to},on:{\"add-emoji\":_vm.addEmoji,\"hide-emoji\":_vm.hideEmoji}}),_vm._v(\" \"),_c('group',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isRobotListShown),expression:\"isRobotListShown\"}],staticClass:\"m-chat-emoji m-chat-robot\"},_vm._l((_vm.robotslist),function(robot){return _c('cell',{key:robot.account,attrs:{\"title\":robot.nick},nativeOn:{\"click\":function($event){_vm.chooseRobot(robot)}}},[_c('img',{staticClass:\"icon u-circle\",attrs:{\"slot\":\"icon\",\"width\":\"20\",\"height\":\"20\",\"src\":robot.avatar},slot:\"icon\"})])}),1),_vm._v(\" \"),_c('div',{staticClass:\"m-chat-editor-main\",class:{robot:_vm.isRobot}},[_c('span',{staticClass:\"u-editor-input\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msgToSent),expression:\"msgToSent\"}],domProps:{\"value\":(_vm.msgToSent)},on:{\"focus\":_vm.onInputFocus,\"input\":function($event){if($event.target.composing){ return; }_vm.msgToSent=$event.target.value}}})]),_vm._v(\" \"),_c('span',{staticClass:\"u-editor-icons\"},[(!_vm.isRobot)?_c('span',{staticClass:\"u-editor-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.showEmoji($event)}}},[_c('i',{staticClass:\"u-icon-img\"},[_c('img',{attrs:{\"src\":_vm.icon1}})])]):_vm._e(),_vm._v(\" \"),(!_vm.isRobot)?_c('span',{staticClass:\"u-editor-icon\",on:{\"change\":_vm.sendFileMsg}},[_c('i',{staticClass:\"u-icon-img\"},[_c('img',{attrs:{\"src\":_vm.icon2}})]),_vm._v(\" \"),_c('input',{ref:\"fileToSent\",attrs:{\"type\":\"file\"}})]):_vm._e(),_vm._v(\" \"),(!_vm.isRobot && !_vm.advancedTeam)?_c('span',{staticClass:\"u-editor-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.sendPlayMsg($event)}}},[_c('i',{staticClass:\"u-icon-img\"},[_c('img',{attrs:{\"src\":_vm.icon3}})])]):_vm._e(),_vm._v(\" \"),(_vm.advancedTeam)?_c('span',{staticClass:\"u-editor-send u-editor-receipt\",on:{\"click\":_vm.turnToMsgReceipt}},[_vm._v(\"回执\")]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"u-editor-send\",on:{\"click\":_vm.sendTextMsg}},[_vm._v(\"发 送\")])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6724720a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/components/ChatEditor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6724720a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatEditor.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatEditor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatEditor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6724720a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatEditor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6724720a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/components/ChatEditor.vue\n// module id = null\n// module chunks = ","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ChatEditor from './components/ChatEditor'\nimport ChatList from './components/ChatList'\nimport util from '../utils'\nimport pageUtil from '../utils/page'\n\n\nexport default {\n  components: {\n    ChatEditor,\n    ChatList\n  },\n  // 进入该页面，文档被挂载\n  mounted () {\n    this.$store.dispatch('showLoading')\n    // 此时设置当前会话\n    this.$store.dispatch('setCurrSession', this.sessionId)\n    pageUtil.scrollChatListDown()\n\n    setTimeout(() => {\n      this.$store.dispatch('hideLoading')\n    }, 1000)\n\n    // 获取群成员\n    if(this.scene === 'team') {\n      var teamMembers = this.$store.state.teamMembers[this.to]\n      if (teamMembers === undefined || teamMembers.length < this.teamInfo.memberNum) {\n        this.$store.dispatch('getTeamMembers', this.to)\n      }\n    }\n  },\n  updated () {\n    pageUtil.scrollChatListDown()\n  },\n  // 离开该页面，此时重置当前会话\n  destroyed () {\n    this.$store.dispatch('resetCurrSession')\n  },\n  data () {\n    return {\n      leftBtnOptions: {\n        backText: ' ',\n        preventGoBack: true,\n      }\n    }\n  },\n  computed: {\n    sessionId () {\n      let sessionId = this.$route.params.sessionId\n      return sessionId\n    },\n    sessionName () {\n      let sessionId = this.sessionId\n      let user = null\n      if (/^p2p-/.test(sessionId)) {\n        user = sessionId.replace(/^p2p-/, '')\n        if (user === this.$store.state.userUID) {\n          return '我的手机'\n        } else if (this.isRobot) {\n          return this.robotInfos[user].nick\n        } else {\n          let userInfo = this.userInfos[user] || {}\n          return util.getFriendAlias(userInfo)\n        }\n      } else if (/^team-/.test(sessionId)) {\n        if (this.teamInfo) {\n          // teamInfo中的人数为初始获取的值，在人员增减后不会及时更新，而teamMembers在人员增减后同步维护的人员信息\n          var members = this.$store.state.teamMembers && this.$store.state.teamMembers[this.teamInfo.teamId]\n          var memberCount = members && members.length\n          return this.teamInfo.name + (memberCount ? `(${memberCount})` : '')\n        } else {\n          return  '群'\n        }\n      }\n    },\n    scene () {\n      return util.parseSession(this.sessionId).scene\n    },\n    to () {\n      return util.parseSession(this.sessionId).to\n    },\n    // 判断是否是机器人\n    isRobot () {\n      let sessionId = this.sessionId\n      let user = null\n      if (/^p2p-/.test(sessionId)) {\n        user = sessionId.replace(/^p2p-/, '')\n        if (this.robotInfos[user]) {\n          return true\n        }\n      }\n      return false\n    },\n    myInfo () {\n      return this.$store.state.myInfo\n    },\n    userInfos () {\n      return this.$store.state.userInfos\n    },\n    robotInfos () {\n      return this.$store.state.robotInfos\n    },\n    msglist () {\n      let msgs = this.$store.state.currSessionMsgs\n      return msgs\n    },\n    teamInfo() {\n      if (this.scene==='team') {\n        var teamId =  this.sessionId.replace('team-','')\n        return this.$store.state.teamlist.find(team=>{\n          return team.teamId === teamId\n        })\n      }\n      return undefined\n    },\n    muteInTeam(){\n      if(this.scene!=='team') return false\n      var teamMembers = this.$store.state.teamMembers\n      var Members = teamMembers && teamMembers[this.teamInfo.teamId]\n      var selfInTeam = Members && Members.find(item=>{\n        return item.account === this.$store.state.userUID\n      })\n      return selfInTeam && selfInTeam.mute || false\n    },\n    teamInvalid() {\n      if (this.scene==='team') {\n        return !(this.teamInfo && this.teamInfo.validToCurrentUser)\n      }\n      return false\n    },\n    sendInvalidHint() {\n      if (this.scene==='team' && this.teamInvalid) {\n        return `您已不在该${this.teamInfo && this.teamInfo.type==='normal'? '讨论组':'群'}，不能发送消息`\n      } else if (this.muteInTeam) {\n        return '您已被禁言'\n      }\n      return '无权限发送消息'\n    }\n  },\n  methods: {\n    onClickBack () {\n      // location.href = '#/contacts'\n      window.history.go(-1)\n    },\n    msgsLoaded () {\n      pageUtil.scrollChatListDown()\n    },\n    enterNameCard () {\n      if (/^p2p-/.test(this.sessionId)) {\n        let account = this.sessionId.replace(/^p2p-/, '')\n        if (account === this.$store.state.userUID) {\n          location.href = `#/general`\n          return\n        }\n        location.href = `#/namecard/${account}`\n      }\n    },\n    onTeamManageClick() {\n      if (this.teamInfo && this.teamInfo.validToCurrentUser) {\n        location.href = `#/teammanage/${this.teamInfo.teamId}`\n      } else {\n        this.$toast('您已退出该群')\n      }\n    },\n    onHistoryClick() {\n      if (this.scene!=='team' || (this.teamInfo && this.teamInfo.validToCurrentUser)) {\n        location.href = `#/chathistory/${this.sessionId}`\n      } else {\n        this.$toast('您已退出该群')\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g-inherit m-article\"},[_c('x-header',{staticClass:\"m-tab\",attrs:{\"left-options\":_vm.leftBtnOptions},on:{\"on-click-back\":_vm.onClickBack}},[_c('h1',{staticClass:\"m-tab-top\",on:{\"click\":_vm.enterNameCard}},[_vm._v(_vm._s(_vm.sessionName))]),_vm._v(\" \"),_c('a',{attrs:{\"slot\":\"left\"},slot:\"left\"}),_vm._v(\" \"),_c('div',{staticClass:\"m-tab-right\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('span',{staticClass:\"icon-history\",on:{\"click\":_vm.onHistoryClick}}),_vm._v(\" \"),(_vm.scene==='team')?_c('span',{staticClass:\"icon-team\",on:{\"click\":_vm.onTeamManageClick}}):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"m-chat-main\"},[(_vm.scene===\"team\" && _vm.teamInvalid)?_c('div',{staticClass:\"invalidHint\"},[_vm._v(\"\\n      \"+_vm._s((\"您已退出该\" + (_vm.teamInfo && _vm.teamInfo.type==='normal' ? '讨论组':'群')))+\"\\n    \")]):_vm._e(),_vm._v(\" \"),_c('chat-list',{attrs:{\"type\":\"session\",\"msglist\":_vm.msglist,\"userInfos\":_vm.userInfos,\"myInfo\":_vm.myInfo,\"isRobot\":_vm.isRobot},on:{\"msgs-loaded\":_vm.msgsLoaded}}),_vm._v(\" \"),_c('chat-editor',{attrs:{\"type\":\"session\",\"scene\":_vm.scene,\"to\":_vm.to,\"isRobot\":_vm.isRobot,\"invalid\":_vm.teamInvalid || _vm.muteInTeam,\"invalidHint\":_vm.sendInvalidHint,\"advancedTeam\":_vm.teamInfo && _vm.teamInfo.type === 'advanced'}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4e4c8f0c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Chat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e4c8f0c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Chat.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e4c8f0c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./Chat.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e4c8f0c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../node_modules/vux-loader/src/template-loader.js!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4e4c8f0c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Chat.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}