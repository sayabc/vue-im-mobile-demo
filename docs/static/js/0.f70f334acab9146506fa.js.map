{"version":3,"sources":["webpack:///./src/pages/components/ChatItem.vue","webpack:///./src/pages/components/ChatItem.vue?492a","webpack:///./src/pages/components/ChatItem.vue?021f","webpack:///./src/pages/components/ChatList.vue","webpack:///./src/pages/components/ChatList.vue?7529","webpack:///./src/pages/components/ChatList.vue?ce59","webpack:///./src/configs/emoji.js","webpack:///./src/pages/components/TeamMember.vue","webpack:///./src/pages/components/TeamMember.vue?3d22","webpack:///./src/pages/components/TeamMember.vue?e107"],"names":["components_ChatItem","String","Object","Boolean","props","type","rawMsg","default","userInfos","myInfo","isRobot","isHistory","data","msg","isFullImgShow","currentAudio","computed","robotInfos","this","$store","state","teamMsgUnRead","_this","obj","needMsgReceipt","flow","teamMsgReads","find","item","idServer","parseInt","unread","beforeMount","assign_default","content","msgOut","robotAccid","avatar","link","from","userUID","config","defaultUserIcon","showTime","util","formatDate","time","showText","text","escape","test","match","forEach","emojiCnt","emojiObj","emojiList","emoji","replace","img","JSON","parse","resourceUrl","imgUrl","value","pinupList","catalog","chartlet","parseCustomMsg","originLink","file","url","audioSrc","mp3Url","Math","round","dur","fileLink","name","scene","generateTeamSysmMsg","generateChatroomSysMsg","tip","message","flag","subType","map","json","query","sort","a","b","score","robotFlow","mapMsgType","mounted","_this2","$nextTick","media","Image","src","className","ext","document","createElement","width","height","autoStart","preload","controls","aLink","href","target","innerHTML","video","$refs","mediaMsg","appendChild","onload","$emit","onerror","methods","revocateMsg","vNode","currSessionId","attrs","that","$vux","confirm","show","title","onCancel","onConfirm","dispatch","idClient","sendRobotBlockMsg","originMsg","body","length","nick","to","params","continueRobotMsg","showFullImg","playAudio","_this3","Audio","play","onended","toMsgUnReadDetail","pages_components_ChatItem","render","_vm","_h","$createElement","_c","_self","staticClass","class","item-me","item-you","item-time","item-tip","session-chat","_v","_s","_e","domProps","ref","on","click","$event","stopPropagation","msg-robot","_l","tmsgs","tmsg","style","tmsg2","answer","status","staticRenderFns","src_pages_components_ChatItem","__webpack_require__","normalizeComponent","ssrContext","components_ChatList","Array","components","ChatItem","canLoadMore","msglist","msgLoadedTimer","msgLoaded","clearTimeout","setTimeout","pages_components_ChatList","id","key","msg-loaded","ChatList_Component","ChatList_normalizeComponent","__webpack_exports__","emojiBaseUrl","[大笑]","[可爱]","[色]","[嘘]","[亲]","[呆]","[口水]","[汗]","[呲牙]","[鬼脸]","[害羞]","[偷笑]","[调皮]","[可怜]","[敲]","[惊讶]","[流感]","[委屈]","[流泪]","[嚎哭]","[惊恐]","[怒]","[酷]","[不说]","[鄙视]","[阿弥陀佛]","[奸笑]","[睡着]","[口罩]","[努力]","[抠鼻孔]","[疑问]","[怒骂]","[晕]","[呕吐]","[拜一拜]","[惊喜]","[流汗]","[卖萌]","[默契眨眼]","[烧香拜佛]","[晚安]","[强]","[弱]","[OK]","[拳头]","[胜利]","[鼓掌]","[握手]","[发怒]","[骷髅]","[便便]","[火]","[溜]","[爱心]","[心碎]","[钟情]","[唇]","[戒指]","[钻石]","[太阳]","[有时晴]","[多云]","[雷]","[雨]","[雪花]","[爱人]","[帽子]","[皇冠]","[篮球]","[足球]","[垒球]","[网球]","[台球]","[咖啡]","[啤酒]","[干杯]","[柠檬汁]","[餐具]","[汉堡]","[鸡腿]","[面条]","[冰淇淋]","[沙冰]","[生日蛋糕]","[蛋糕]","[糖果]","[葡萄]","[西瓜]","[光碟]","[手机]","[电话]","[电视]","[声音开启]","[声音关闭]","[铃铛]","[锁头]","[放大镜]","[灯泡]","[锤头]","[烟]","[炸弹]","[枪]","[刀]","[药]","[打针]","[钱袋]","[钞票]","[银行卡]","[手柄]","[麻将]","[调色板]","[电影]","[麦克风]","[耳机]","[音乐]","[吉他]","[火箭]","[飞机]","[火车]","[公交]","[轿车]","[出租车]","[警车]","[自行车]","emojiItem","ajmd","xxy","lt","i","components_TeamMember","teamId","advanced","showAllMode","filterAccount","removeMode","hasManagePermission","hasSearched","undefined","teamMembers","teamInfo","teamList","teamlist","team","members","needSearchAccounts","member","valid","account","alias","isOwner","push","nickInTeam","searchUsers","splice","membersInDisplay","filter","slice","hasInvitePermission","inviteMode","Accounts","_this4","accounts","done","users","updateTeamMember","_this5","user","triggerRemove","e","remove","_this6","functionName","options","error","$toast","cancelBubble","preventDefault","onMemberClick","location","pages_components_TeamMember","s-bg-white","alt","Component"],"mappings":"iHA+FeA,GAELC,OAEEC,OAMAA,OAMAA,OAMAC,QAMAA,SA3BVC,OACEC,KAAMJ,OACNK,QACED,KAAMH,OACNK,QAFM,WAGJ,WAGJC,WACEH,KAAMH,OACNK,QAFS,WAGP,WAGJE,QACEJ,KAAMH,OACNK,QAFM,WAGJ,WAGJG,SACEL,KAAMF,QACNI,QAFO,WAGL,OAAO,IAGXI,WACEN,KAAMF,QACNI,QAFS,WAGP,OAAO,KAUbK,KAxCa,WAyCX,OACEC,IAAK,GACLC,eAAe,EACfC,aAAc,OAGlBC,UACEC,WADQ,WAEN,OAAOC,KAAKC,OAAOC,MAAMH,YAE3BI,cAJQ,WAIQ,IAAAC,EAAAJ,KACVK,GAAOL,KAAKP,WACbO,KAAKL,IAAIW,gBACO,QAAhBN,KAAKL,IAAIY,MACTP,KAAKC,OAAOC,MAAMM,aAAaC,KAAK,SAAAC,GAAA,OAAQA,EAAKC,WAAaP,EAAKT,IAAIgB,WAE1E,OAAON,EAAMO,SAASP,EAAIQ,SAAW,IAGzCC,YA5Da,WA6DX,IAAIJ,EAAOK,OAAkBf,KAAKZ,QAElC,GAAkB,YAAdY,KAAKb,KAEP,GAAkB,OAAduB,EAAKH,KACP,GAAkB,UAAdG,EAAKvB,MAAoBuB,EAAKM,SAAWN,EAAKM,QAAQC,OAAQ,CAEhE,IAAIC,EAAaR,EAAKM,QAAQE,WAC9BR,EAAKS,OAASnB,KAAKD,WAAWmB,GAAYC,OAC1CT,EAAKlB,SAAU,EACfkB,EAAKU,KAAL,cAA0BF,OACjBR,EAAKW,OAASrB,KAAKC,OAAOC,MAAMoB,SACzCZ,EAAKS,OAAUnB,KAAKV,UAAUoB,EAAKW,OAASrB,KAAKV,UAAUoB,EAAKW,MAAMF,QAAWI,IAAOC,gBACxFd,EAAKU,KAAL,cAA0BV,EAAKW,MAG/BX,EAAKS,OAASnB,KAAKT,OAAO4B,WAEL,QAAdT,EAAKH,OACdG,EAAKS,OAASnB,KAAKT,OAAO4B,aAI5BT,EAAKe,SAAWC,IAAKC,WAAWjB,EAAKkB,MAEvC,GAAkB,YAAdlB,EAAKvB,KAEPuB,EAAKmB,SAAWnB,EAAKoB,UAChB,GAAkB,SAAdpB,EAAKvB,KAAiB,CAG/B,GADAuB,EAAKmB,SAAWH,IAAKK,OAAOrB,EAAKoB,MAC7B,aAAaE,KAAKtB,EAAKmB,UACRnB,EAAKmB,SAASI,MAAM,eAC1BC,QAAQ,SAAAJ,GACjB,IAAIK,EAAWC,IAASC,UAAUC,MAC9BH,EAASL,KACXpB,EAAKmB,SAAWnB,EAAKmB,SAASU,QAAQT,EAAtB,iCAA6DK,EAASL,GAAMU,IAA5E,cAIjB,GAAkB,WAAd9B,EAAKvB,KAAmB,CACjC,IAAI6B,EAAUyB,KAAKC,MAAMhC,EAAKM,SAE9B,GAAqB,IAAjBA,EAAQ7B,KAAY,CACtB,IAAIO,EAAOsB,EAAQtB,KACfiD,EAAcpB,IAAOoB,YAEzBjC,EAAKvB,KAAO,eACZuB,EAAKkC,OAAYD,EAAjB,YAAwCjD,EAAKmD,MAA7C,YAEK,GAAqB,IAAjB7B,EAAQ7B,KAAY,CAC7B,IAAIO,EAAOsB,EAAQtB,KACfyC,EAAW,GACXC,IAASU,UAAUpD,EAAKqD,WAC1BZ,EAAWC,IAASU,UAAUpD,EAAKqD,SAASrD,EAAKsD,UAEjDtC,EAAKvB,KAAO,eACZuB,EAAKkC,OAAL,GAAiBT,EAASK,UAG5B9B,EAAKmB,SAAWH,IAAKuB,eAAevC,GACd,YAAlBA,EAAKmB,WACPnB,EAAKmB,UAAY,sBAGhB,GAAkB,UAAdnB,EAAKvB,KAEduB,EAAKwC,WAAaxC,EAAKyC,KAAKC,SACvB,GAAkB,UAAd1C,EAAKvB,WAET,GAAkB,UAAduB,EAAKvB,KACduB,EAAK2C,SAAW3C,EAAKyC,KAAKG,OAC1B5C,EAAKmB,SAAW0B,KAAKC,MAAM9C,EAAKyC,KAAKM,IAAM,KAAQ,cAC9C,GAAkB,SAAd/C,EAAKvB,KACduB,EAAKgD,SAAWhD,EAAKyC,KAAKC,IAC1B1C,EAAKmB,SAAWnB,EAAKyC,KAAKQ,UACrB,GAAkB,iBAAdjD,EAAKvB,KACK,SAAfuB,EAAKkD,MACPlD,EAAKmB,SAAWH,IAAKmC,oBAAoBnD,GAGzCA,EAAKmB,SAAWH,IAAKoC,uBAAuBpD,QAEzC,GAAkB,QAAdA,EAAKvB,KAEduB,EAAKmB,SAAWnB,EAAKqD,SAChB,GAAkB,UAAdrD,EAAKvB,KAAkB,CAChC,IAAI6B,EAAUN,EAAKM,YACfgD,EAAUhD,EAAQgD,YACtB,GAAKhD,EAAQC,QAIN,GAAqB,QAAjBD,EAAQiD,KACjBvD,EAAKwD,QAAU,MACfF,EAAUA,EAAQG,IAAI,SAAAzD,GACpB,MAAkB,aAAdA,EAAKvB,KAEAuB,EAAKM,QAAQoD,KACG,SAAd1D,EAAKvB,MAAiC,WAAduB,EAAKvB,OAGpCA,KAAM,OACN2C,KAAMpB,EAAKM,UAEU,UAAdN,EAAKvB,OAGZA,KAAM,QACNiE,IAAK1C,EAAKM,eAJP,IAQTN,EAAKsD,QAAUA,OACV,GAA0B,QAAtBtD,EAAKM,QAAQiD,KAAgB,CACtCvD,EAAKwD,QAAU,MACfxD,EAAK2D,MAAQL,EAAQK,MACrB,IAAIpC,EAAQ+B,EAAQ/B,MAAMqC,KAAK,SAACC,EAAGC,GAEjC,OAAOA,EAAEC,MAAQF,EAAEE,QAErB/D,EAAKsD,QAAU/B,EAAM,SA9BrBvB,EAAKgE,UAAY,MACjBhE,EAAKmB,SAAWnB,EAAKoB,UAgCvBpB,EAAKmB,SAAL,IAAoBH,IAAKiD,WAAWjE,GAApC,iBAEFV,KAAKL,IAAMe,GAEbkE,QA7La,WA6LF,IAAAC,EAAA7E,KACLU,EAAOV,KAAKL,IAEhBK,KAAK8E,UAAU,WACb,IAAIC,EAAQ,KACZ,GAAkB,UAAdrE,EAAKvB,MAEP4F,EAAQ,IAAIC,OACNC,IAAMvE,EAAKyC,KAAKC,IAAM,6CACvB,GAAkB,iBAAd1C,EAAKvB,MAEd4F,EAAQ,IAAIC,OACNE,UAAY,eAClBH,EAAME,IAAMvE,EAAKkC,YACZ,GAAkB,iBAAdlC,EAAKvB,MAEd4F,EAAQ,IAAIC,OACNE,UAAY,YAClBH,EAAME,IAAMvE,EAAKkC,YACZ,GAAkB,UAAdlC,EAAKvB,KACd,GAAI,sBAAsB6C,KAAKtB,EAAKyC,KAAKgC,MACvCJ,EAAQK,SAASC,cAAc,UACzBJ,IAAMvE,EAAKyC,KAAKC,IACtB2B,EAAMO,MAAQ,IACdP,EAAMQ,OAAS,IACfR,EAAMS,WAAY,EAClBT,EAAMU,QAAU,WAChBV,EAAMW,SAAW,eACZ,CACL,IAAIC,EAAQP,SAASC,cAAc,KACnCM,EAAMC,KAAOlF,EAAKyC,KAAKC,IACvBuC,EAAME,OAAS,SACfF,EAAMG,UAAN,mCAAqDC,MAAMpC,KAC3DkB,EAAKmB,MAAMC,SAASC,YAAYP,GAGhCZ,GACEF,EAAKmB,MAAMC,UACbpB,EAAKmB,MAAMC,SAASC,YAAYnB,GAElCA,EAAMoB,OAAS,WACbtB,EAAKuB,MAAM,eAEbrB,EAAMsB,QAAU,WACdxB,EAAKuB,MAAM,gBAGbvB,EAAKuB,MAAM,iBAIjBE,SACEC,YADO,SACMC,GAEX,GAAIxG,KAAKC,OAAOC,MAAMuG,eAChBD,GAASA,EAAM9G,MAAQ8G,EAAM9G,KAAKgH,MAAO,CAC3C,IAAIA,EAAQF,EAAM9G,KAAKgH,MACvB,GAAmB,UAAfA,EAAMvH,KACR,OAGF,GAAmB,QAAfuH,EAAMnG,KAAgB,CACxB,IAAIoG,EAAO3G,KACXA,KAAK4G,KAAKC,QAAQC,MAChBC,MAAO,WACPC,SAFqB,aAIrBC,UAJqB,WAKnBN,EAAK1G,OAAOiH,SAAS,eACnBC,SAAUT,EAAMS,iBAQ9BC,kBA1BO,SA0BYzH,EAAK0H,GACtB,IAAGrH,KAAKP,UAAR,CAIA,IAAI6H,EAAO,eACP3H,EAAImC,MAA4B,IAApBnC,EAAImC,KAAKyF,SACvBD,EAAO3H,EAAImC,KAAK,GAAGA,MAErB,IAAIZ,EAAamG,EAAUrG,QAAQE,WAC9BlB,KAAKR,UACR8H,MAAWtH,KAAKD,WAAWmB,GAAYsG,KAAvC,IAA+CF,GAE/B,YAAdtH,KAAKb,KACPa,KAAKC,OAAOiH,SAAS,gBACnB/H,KAAM,OACNyE,MAAOyD,EAAUzD,MACjB6D,GAAIJ,EAAUI,GACdvG,aAEAwG,OAAQ/H,EAAI+H,OACZ7B,OAAQlG,EAAIkG,OAEZyB,SAEqB,aAAdtH,KAAKb,MACda,KAAKC,OAAOiH,SAAS,wBACnB/H,KAAM,OACN+B,aAEAwG,OAAQ/H,EAAI+H,OACZ7B,OAAQlG,EAAIkG,OAEZyB,WAINK,iBA/DO,SA+DWzG,GAChBlB,KAAKC,OAAOiH,SAAS,mBAAoBhG,IAE3C0G,YAlEO,SAkEM3C,GACXjF,KAAKC,OAAOiH,SAAS,qBACnBjC,SAGJ4C,UAvEO,SAuEI5C,GAAK,IAAA6C,EAAA9H,KACTA,KAAKH,eACRG,KAAKH,aAAe,IAAIkI,MAAM9C,GAC9BjF,KAAKH,aAAamI,OAClBhI,KAAKH,aAAaoI,QAAU,WAC1BH,EAAKjI,aAAe,QAI1BqI,kBAhFO,WAiFLlI,KAAK4F,KAAO,sBAAwB5F,KAAKL,IAAIgB,aCvZpCwH,GADEC,OARjB,WAA0B,IAAAC,EAAArI,KAAasI,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,MAAgBE,YAAA,QAAAC,OACzGC,UAAA,QAAAP,EAAA1I,IAAAY,KACAsI,WAAA,OAAAR,EAAA1I,IAAAY,KACAuI,YAAA,YAAAT,EAAA1I,IAAAR,KACA4J,WAAA,QAAAV,EAAA1I,IAAAR,KACA6J,eAAA,YAAAX,EAAAlJ,QACI,YAAAkJ,EAAA1I,IAAAR,KAAAqJ,EAAA,OAAAH,EAAAY,GAAA,QAAAZ,EAAAa,GAAAb,EAAA1I,IAAAkC,UAAA,mBAAAwG,EAAA1I,IAAAR,KAAAqJ,EAAA,OAA2HE,YAAA,QAAkBL,EAAAY,GAAAZ,EAAAa,GAAAb,EAAA1I,IAAAkC,aAAA,iBAAAwG,EAAA1I,IAAAR,MAAA,SAAAkJ,EAAA1I,IAAAiE,MAAA4E,EAAA,OAAyGE,YAAA,iBAA2BL,EAAAY,GAAAZ,EAAAa,GAAAb,EAAA1I,IAAAkC,aAAA,OAAAwG,EAAA1I,IAAAY,MAAA,QAAA8H,EAAA1I,IAAAY,KAAAiI,EAAA,OAA6F9B,OAAOS,SAAAkB,EAAA1I,IAAAwH,SAAAvF,KAAAyG,EAAA1I,IAAAiC,KAAArB,KAAA8H,EAAA1I,IAAAY,KAAApB,KAAAkJ,EAAA1I,IAAAR,QAAyFkJ,EAAA1I,IAAA,OAAA6I,EAAA,KAA2BE,YAAA,WAAAhC,OAA8Bd,KAAAyC,EAAA1I,IAAAyB,QAAqBoH,EAAA,OAAYE,YAAA,gBAAAhC,OAAmCzB,IAAAoD,EAAA1I,IAAAwB,YAAsB,iBAAAkH,EAAA1I,IAAAR,KAAAqJ,EAAA,KAA4CE,YAAA,aAAuBF,EAAA,MAAAH,EAAAY,GAAAZ,EAAAa,GAAAb,EAAA1I,IAAA8B,aAAA4G,EAAAY,GAAAZ,EAAAa,GAAAb,EAAA1I,IAAA0B,SAAAgH,EAAAc,KAAAd,EAAAY,GAAA,cAAAZ,EAAA1I,IAAAR,KAAAqJ,EAAA,QAAqIE,YAAA,WAAAU,UAAiCtD,UAAAuC,EAAAa,GAAAb,EAAA1I,IAAAkC,aAAsC,iBAAAwG,EAAA1I,IAAAR,KAAAqJ,EAAA,QAA6Ca,IAAA,WAAAX,YAAA,aAAsC,iBAAAL,EAAA1I,IAAAR,KAAAqJ,EAAA,QAA6Ca,IAAA,WAAAX,YAAA,aAAsC,UAAAL,EAAA1I,IAAAR,KAAAqJ,EAAA,QAAsCa,IAAA,WAAAX,YAAA,WAAAY,IAA0CC,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBpB,EAAAT,YAAAS,EAAA1I,IAAAuD,gBAAsC,UAAAmF,EAAA1I,IAAAR,KAAAqJ,EAAA,QAAsCa,IAAA,WAAAX,YAAA,aAAsC,UAAAL,EAAA1I,IAAAR,KAAAqJ,EAAA,QAAsCE,YAAA,WAAAY,IAA2BC,MAAA,SAAAC,GAAyBnB,EAAAR,UAAAQ,EAAA1I,IAAA0D,cAAkCgF,EAAAY,GAAAZ,EAAAa,GAAAb,EAAA1I,IAAAkC,aAAA,SAAAwG,EAAA1I,IAAAR,KAAAqJ,EAAA,QAAwEE,YAAA,aAAuBF,EAAA,KAAU9B,OAAOd,KAAAyC,EAAA1I,IAAA+D,SAAAmC,OAAA,YAA2C2C,EAAA,KAAUE,YAAA,qBAA+BL,EAAAY,GAAAZ,EAAAa,GAAAb,EAAA1I,IAAAkC,eAAA,UAAAwG,EAAA1I,IAAAR,KAAAqJ,EAAA,QAA2EE,YAAA,WAAAC,OAA8Be,YAAA,QAAArB,EAAA1I,IAAA+E,YAAA2D,EAAA7I,WAAwD,QAAA6I,EAAA1I,IAAA+E,UAAA8D,EAAA,OAAAH,EAAAY,GAAAZ,EAAAa,GAAAb,EAAA1I,IAAAkC,aAAA,QAAAwG,EAAA1I,IAAAuE,QAAAsE,EAAA,MAAAH,EAAAsB,GAAAtB,EAAA1I,IAAA,iBAAAiK,GAAuJ,OAAApB,EAAA,MAAAH,EAAAsB,GAAA,WAAAE,GAA8C,OAAArB,EAAA,gBAAAqB,EAAA1K,KAAAqJ,EAAA,OAAAA,EAAA,KAAAH,EAAAY,GAAAZ,EAAAa,GAAAW,EAAA/H,WAAA,UAAA+H,EAAA1K,KAAAqJ,EAAA,OAAAA,EAAA,KAAAA,EAAA,OAAwI9B,OAAOzB,IAAA4E,EAAAzG,WAAgB,QAAAyG,EAAA1K,KAAAqJ,EAAA,OAAAA,EAAA,KAA4CG,MAAAkB,EAAAC,MAAApD,OAAwBd,KAAAiE,EAAAhE,cAAA,YAAsCgE,EAAA,MAAArB,EAAA,MAAAH,EAAAsB,GAAAE,EAAA,eAAAE,GAA4D,OAAAvB,EAAA,KAAAA,EAAA,OAAyB9B,OAAOzB,IAAA8E,EAAA3G,WAAqB,GAAAiF,EAAAc,KAAAd,EAAAY,GAAA,KAAAY,EAAA,KAAArB,EAAA,MAAAH,EAAAsB,GAAAE,EAAA,cAAAE,GAAkF,OAAAvB,EAAA,KAAAH,EAAAY,GAAAZ,EAAAa,GAAAa,EAAAjI,WAA4C,GAAAuG,EAAAc,SAAA,UAAAU,EAAA1K,KAAAqJ,EAAA,OAAAA,EAAA,KAA0DG,MAAAkB,EAAAC,MAAApD,OAAwBgB,OAAAmC,EAAAnC,OAAA7B,OAAAgE,EAAAhE,QAA0CyD,IAAKC,MAAA,SAAAC,GAAyBnB,EAAAjB,kBAAAyC,EAAAxB,EAAA1I,SAAuCkK,EAAA,MAAArB,EAAA,MAAAH,EAAAsB,GAAAE,EAAA,eAAAE,GAA4D,OAAAvB,EAAA,KAAAA,EAAA,OAAyB9B,OAAOzB,IAAA8E,EAAA3G,WAAqB,GAAAiF,EAAAc,KAAAd,EAAAY,GAAA,KAAAY,EAAA,KAAArB,EAAA,MAAAH,EAAAsB,GAAAE,EAAA,cAAAE,GAAkF,OAAAvB,EAAA,KAAAH,EAAAY,GAAAZ,EAAAa,GAAAa,EAAAjI,WAA4C,GAAAuG,EAAAc,SAAAd,EAAAc,SAA6B,KAAK,WAAAd,EAAA1I,IAAAuE,QAAAsE,EAAA,OAAAA,EAAA,KAAAH,EAAAY,GAAAZ,EAAAa,GAAAb,EAAA1I,IAAAqE,QAAAgG,aAAA3B,EAAAc,KAAAd,EAAAY,GAAA,aAAAZ,EAAA1I,IAAA+E,WAAA2D,EAAA7I,QAAkT6I,EAAAc,KAAlTX,EAAA,QAAwKE,YAAA,aAAuBF,EAAA,KAAUE,YAAA,aAAAY,IAA6BC,MAAA,SAAAC,GAAyBnB,EAAAV,iBAAAU,EAAA1I,IAAAqB,QAAAE,gBAAmDmH,EAAAY,GAAA,+BAAAZ,EAAA1I,IAAAR,KAAAqJ,EAAA,QAA2EE,YAAA,oBAA8BL,EAAAY,GAAAZ,EAAAa,GAAAb,EAAA1I,IAAAkC,aAAA2G,EAAA,QAAgDE,YAAA,WAAAU,UAAiCtD,UAAAuC,EAAAa,GAAAb,EAAA1I,IAAAkC,aAAsCwG,EAAAY,GAAA,cAAAZ,EAAA1I,IAAAsK,OAAAzB,EAAA,QAAmDE,YAAA,eAAyBF,EAAA,KAAUE,YAAA,qBAA6BL,EAAAc,KAAAd,EAAAY,GAAA,KAAAZ,EAAAlI,eAAA,EAAAqI,EAAA,KAAyDE,YAAA,aAAAhC,OAAgCd,KAAA,sBAAAyC,EAAA1I,IAAA,OAAA0I,EAAA1I,IAAA,YAA0E0I,EAAAY,GAAAZ,EAAAa,GAAAb,EAAAlI,cAAA,EAAAkI,EAAAlI,cAAA,iBAAAkI,EAAAc,OAAAd,EAAAc,QAErpHe,oBCLjB,IAuBeC,EAvBUC,EAAQ,OAcjCC,CACEvL,EACAqJ,GATF,EAVA,SAAAmC,GACEF,EAAQ,SAaV,kBAEA,MAUgC,QCCjBG,GAKLxL,OACQA,OAAQE,QAEdA,QAMAuL,MAMAxL,OAMAA,OAMAC,SA/BVwL,YACEC,YAEFxL,OACEC,KAAMJ,OACN4L,aAAc5L,OAAQE,SACtBO,SACEL,KAAMF,QACNI,QAFO,WAGL,OAAO,IAGXuL,SACEzL,KAAMqL,MACNnL,QAFO,WAGL,WAGJC,WACEH,KAAMH,OACNK,QAFS,WAGP,WAGJE,QACEJ,KAAMH,OACNK,QAFM,WAGJ,WAGJI,WACEN,KAAMF,QACNI,QAFS,WAGP,OAAO,KAUbK,KA5Ca,WA6CX,OACEE,eAAe,EACfiL,eAAgB,OAGpBvE,SACEsB,YADO,SACM3C,GACXjF,KAAKC,OAAOiH,SAAS,qBACnBjC,SAGJ6F,UANO,WAMM,IAAA1K,EAAAJ,KACX+K,aAAa/K,KAAK6K,gBAClB7K,KAAK6K,eAAiBG,WAAW,WAC/B5K,EAAKgG,MAAM,gBACV,QCpFM6E,GADE7C,OAFP,WAAgB,IAAAC,EAAArI,KAAasI,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,MAAgBE,YAAA,0BAAAhC,OAA6CwE,GAAA,eAAkB7C,EAAA,YAAAG,EAAA,MAA6BE,YAAA,oBAA8BL,EAAAY,GAAA,gCAAAT,EAAA,MAAkDE,YAAA,oBAA8BL,EAAAY,GAAA,gCAAAZ,EAAAY,GAAA,KAAAZ,EAAAsB,GAAAtB,EAAA,iBAAA1I,GAAwF,OAAA6I,EAAA,aAAuB2C,IAAAxL,EAAAwH,SAAAT,OAAwBvH,KAAAkJ,EAAAlJ,KAAAC,OAAAO,EAAAH,QAAA6I,EAAA7I,QAAAF,UAAA+I,EAAA/I,UAAAC,OAAA8I,EAAA9I,OAAAE,UAAA4I,EAAA5I,WAA2H6J,IAAK8B,aAAA/C,EAAAyC,gBAA8B,IAExjBZ,oBCChC,IAcImB,EAdqBjB,EAAQ,OAcjBkB,CACdf,EACAU,GAT6B,EAV/B,SAAoBX,GAClBF,EAAQ,SAaS,KAEU,MAUdmB,EAAA,EAAAF,EAAiB,2CC1BhCjB,EAAA,YAGIoB,gDAEAnJ,GACFC,OACEmJ,QAAQtI,KAAK,eAAeuI,QAAQvI,KAAK,gBAAgBwI,OAAOxI,KAAK,gBAAgByI,OAAOzI,KAAK,gBAAgB0I,OAAO1I,KAAK,gBAAgB2I,OAAO3I,KAAK,gBAAgB4I,QAAQ5I,KAAK,gBAAgB6I,OAAO7I,KAAK,iBAAiB8I,QAAQ9I,KAAK,gBAAgB+I,QAAQ/I,KAAK,gBAAgBgJ,QAAQhJ,KAAK,gBAAgBiJ,QAAQjJ,KAAK,gBAAgBkJ,QAAQlJ,KAAK,gBAAgBmJ,QAAQnJ,KAAK,gBAAgBoJ,OAAOpJ,KAAK,gBAAgBqJ,QAAQrJ,KAAK,gBAAgBsJ,QAAQtJ,KAAK,gBAAgBuJ,QAAQvJ,KAAK,gBAAgBwJ,QAAQxJ,KAAK,gBAAgByJ,QAAQzJ,KAAK,gBAAgB0J,QAAQ1J,KAAK,gBAAgB2J,OAAO3J,KAAK,gBAAgB4J,OAAO5J,KAAK,gBAAgB6J,QAAQ7J,KAAK,gBAAgB8J,QAAQ9J,KAAK,gBAAgB+J,UAAU/J,KAAK,gBAAgBgK,QAAQhK,KAAK,gBAAgBiK,QAAQjK,KAAK,gBAAgBkK,QAAQlK,KAAK,gBAAgBmK,QAAQnK,KAAK,gBAAgBoK,SAASpK,KAAK,gBAAgBqK,QAAQrK,KAAK,gBAAgBsK,QAAQtK,KAAK,gBAAgBuK,OAAOvK,KAAK,gBAAgBwK,QAAQxK,KAAK,gBAAgByK,SAASzK,KAAK,iBAAiB0K,QAAQ1K,KAAK,iBAAiB2K,QAAQ3K,KAAK,iBAAiB4K,QAAQ5K,KAAK,iBAAiB6K,UAAU7K,KAAK,iBAAiB8K,UAAU9K,KAAK,iBAAiB+K,QAAQ/K,KAAK,iBAAiBgL,OAAOhL,KAAK,gBAAgBiL,OAAOjL,KAAK,gBAAgBkL,QAAQlL,KAAK,gBAAgBmL,QAAQnL,KAAK,gBAAgBoL,QAAQpL,KAAK,gBAAgBqL,QAAQrL,KAAK,gBAAgBsL,QAAQtL,KAAK,iBAAiBuL,QAAQvL,KAAK,gBAAgBwL,QAAQxL,KAAK,gBAAgByL,QAAQzL,KAAK,gBAAgB0L,OAAO1L,KAAK,gBAAgB2L,OAAO3L,KAAK,gBAAgB4L,QAAQ5L,KAAK,gBAAgB6L,QAAQ7L,KAAK,gBAAgB8L,QAAQ9L,KAAK,gBAAgB+L,OAAO/L,KAAK,gBAAgBgM,QAAQhM,KAAK,gBAAgBiM,QAAQjM,KAAK,gBAAgBkM,QAAQlM,KAAK,gBAAgBmM,SAASnM,KAAK,gBAAgBoM,QAAQpM,KAAK,gBAAgBqM,OAAOrM,KAAK,gBAAgBsM,OAAOtM,KAAK,gBAAgBuM,QAAQvM,KAAK,gBAAgBwM,QAAQxM,KAAK,gBAAgByM,QAAQzM,KAAK,gBAAgB0M,QAAQ1M,KAAK,gBAAgB2M,QAAQ3M,KAAK,gBAAgB4M,QAAQ5M,KAAK,gBAAgB6M,QAAQ7M,KAAK,gBAAgB8M,QAAQ9M,KAAK,gBAAgB+M,QAAQ/M,KAAK,gBAAgBgN,QAAQhN,KAAK,gBAAgBiN,QAAQjN,KAAK,gBAAgBkN,QAAQlN,KAAK,gBAAgBmN,SAASnN,KAAK,gBAAgBoN,QAAQpN,KAAK,gBAAgBqN,QAAQrN,KAAK,gBAAgBsN,QAAQtN,KAAK,gBAAgBuN,QAAQvN,KAAK,gBAAgBwN,SAASxN,KAAK,gBAAgByN,QAAQzN,KAAK,gBAAgB0N,UAAU1N,KAAK,gBAAgB2N,QAAQ3N,KAAK,gBAAgB4N,QAAQ5N,KAAK,gBAAgB6N,QAAQ7N,KAAK,gBAAgB8N,QAAQ9N,KAAK,gBAAgB+N,QAAQ/N,KAAK,gBAAgBgO,QAAQhO,KAAK,gBAAgBiO,QAAQjO,KAAK,gBAAgBkO,QAAQlO,KAAK,gBAAgBmO,UAAUnO,KAAK,gBAAgBoO,UAAUpO,KAAK,gBAAgBqO,QAAQrO,KAAK,gBAAgBsO,QAAQtO,KAAK,gBAAgBuO,SAASvO,KAAK,gBAAgBwO,QAAQxO,KAAK,gBAAgByO,QAAQzO,KAAK,gBAAgB0O,OAAO1O,KAAK,gBAAgB2O,QAAQ3O,KAAK,gBAAgB4O,OAAO5O,KAAK,gBAAgB6O,OAAO7O,KAAK,gBAAgB8O,OAAO9O,KAAK,gBAAgB+O,QAAQ/O,KAAK,gBAAgBgP,QAAQhP,KAAK,gBAAgBiP,QAAQjP,KAAK,gBAAgBkP,SAASlP,KAAK,gBAAgBmP,QAAQnP,KAAK,iBAAiBoP,QAAQpP,KAAK,iBAAiBqP,SAASrP,KAAK,iBAAiBsP,QAAQtP,KAAK,iBAAiBuP,SAASvP,KAAK,iBAAiBwP,QAAQxP,KAAK,iBAAiByP,QAAQzP,KAAK,iBAAiB0P,QAAQ1P,KAAK,iBAAiB2P,QAAQ3P,KAAK,iBAAiB4P,QAAQ5P,KAAK,iBAAiB6P,QAAQ7P,KAAK,iBAAiB8P,QAAQ9P,KAAK,iBAAiB+P,QAAQ/P,KAAK,iBAAiBgQ,SAAShQ,KAAK,iBAAiBiQ,QAAQjQ,KAAK,iBAAiBkQ,SAASlQ,KAAK,mBAIvjH,IAAK,IAAIb,KAASD,EAAW,CAC3B,IAAIiR,EAAYjR,EAAUC,GAC1B,IAAK,IAAI6I,KAAOmI,EAAW,CACzB,IAAI5S,EAAO4S,EAAUnI,GACrBzK,EAAK8B,IAASgJ,EAAd,IAA8BlJ,EAA9B,IAAuC5B,EAAKyC,MAUhD,IANA,IAAIL,GACFyQ,QACAC,OACAC,OAGOC,EAAI,EAAGA,GAAK,GAAIA,IAAK,CAC5B,IAAIvI,EAAM,SAAUuI,GAAK,GAAKA,EAAG,IAAMA,GACvC5Q,EAAA,KAAkBqI,IAAQhI,KAAMgI,EAAM,QAExC,IAAK,IAAIuI,EAAI,EAAGA,GAAK,GAAIA,IAAK,CAC5B,IAAIvI,EAAM,QAASuI,GAAK,GAAKA,EAAG,IAAMA,GACtC5Q,EAAA,IAAiBqI,IAAQhI,KAAMgI,EAAM,QAEvC,IAAK,IAAIuI,EAAI,EAAGA,GAAK,GAAIA,IAAK,CAC5B,IAAIvI,EAAM,OAAQuI,GAAK,GAAKA,EAAG,IAAMA,GACrC5Q,EAAA,GAAgBqI,IAAQhI,KAAMgI,EAAM,QAGtC,IAAK,IAAI7I,KAASQ,EAAW,CAC3B,IAAIwQ,EAAYxQ,EAAUR,GAC1B,IAAK,IAAI6I,KAAOmI,EAAW,CACzB,IAAI5S,EAAO4S,EAAUnI,GACrBzK,EAAK8B,IAASgJ,EAAd,IAA8BlJ,EAA9B,IAAuC5B,EAAKyC,MAIjCoI,EAAA,GACblJ,YACAS,wICtBa6Q,GAGH5U,OAIAE,QAKAA,QAIAuL,OAfVtL,OACE0U,QACEzU,KAAMJ,QAGR8U,UACE1U,KAAMF,QACNI,SAAS,GAGXyU,aACE3U,KAAMF,QACNI,SAAS,GAEX0U,eACE5U,KAAMqL,QAIV9K,KApBa,WAqBX,OACEsU,YAAY,EACZC,qBAAqB,EACrBC,aAAa,IAGjBtP,QA3Ba,gBA8BSuP,IADFnU,KAAKC,OAAOC,MAAMkU,YAAYpU,KAAK4T,SAEnD5T,KAAKC,OAAOiH,SAAS,iBAAkBlH,KAAK4T,SAGhD9T,UACEuU,SADQ,WACG,IAAAjU,EAAAJ,KACLsU,EAAWtU,KAAKC,OAAOC,MAAMqU,SAC7BC,EAAQF,GAAYA,EAAS7T,KAAK,SAAA+T,GACpC,OAAOA,EAAKZ,SAAWxT,EAAKwT,SAE9B,GAAIY,EAGJ,OAAOA,GAETC,QAXQ,WAWE,IAAA5P,EAAA7E,KACJyU,EAAUzU,KAAKC,OAAOC,MAAMkU,YAAYpU,KAAK4T,QAC7CtU,EAAYU,KAAKC,OAAOC,MAAMZ,UAC9BoV,KACJ,GAAID,EAAS,CAmBX,GAlBAA,EAAUA,EAAQtQ,IAAK,SAAAzD,GACrB,IAAIiU,EAAS5T,OAAkBL,GAe/B,OAdAiU,EAAOC,OAAQ,EACXD,EAAOE,UAAYhQ,EAAK5E,OAAOC,MAAMoB,SACvCqT,EAAOG,MAAQ,IACfH,EAAOxT,OAAS0D,EAAK5E,OAAOC,MAAMX,OAAO4B,OACzC0D,EAAKkQ,QAA0B,UAAhBJ,EAAOxV,KACtB0F,EAAKoP,oBAAsC,WAAhBU,EAAOxV,WACKgV,IAA9B7U,EAAUqV,EAAOE,UAC1BH,EAAmBM,KAAKL,EAAOE,SAC/BF,EAAOxT,OAASwT,EAAOxT,QAAU0D,EAAK1D,OACtCwT,EAAOG,MAAQH,EAAOM,YAAcN,EAAOE,UAE3CF,EAAOxT,OAAS7B,EAAUqV,EAAOE,SAAS1T,OAC1CwT,EAAOG,MAAQH,EAAOM,YAAa3V,EAAUqV,EAAOE,SAASrN,MAExDmN,IAELD,EAAmBnN,OAAO,IAAMvH,KAAKkU,YAEvC,IADAlU,KAAKkU,aAAc,EACbQ,EAAmBnN,OAAO,GAC9BvH,KAAKkV,YAAYR,EAAmBS,OAAO,EAAG,MAGlD,OAAOV,EAET,UAEFW,iBA5CQ,WA4CW,IAAAtN,EAAA9H,KACjB,OAAIA,KAAK+T,cACA/T,KAAKyU,QAAQY,OAAO,SAAAV,GACzB,QAAS7M,EAAKiM,cAActT,KAAK,SAAAoU,GAAA,OAAWA,IAAYF,EAAOE,YAEzD7U,KAAK6T,UAAY7T,KAAK8T,YACvB9T,KAAKyU,QAELzU,KAAKyU,QAAQa,MAAM,EAAGtV,KAAKuV,oBAAsB,EAAI,IAGhEA,oBAvDQ,WAwDN,OAAOvV,KAAK6T,WAAa7T,KAAKiU,qBAAwBjU,KAAKqU,UAAuC,QAA7BrU,KAAKqU,SAASmB,cAGvFlP,SACE4O,YADO,SACKO,GAAU,IAAAC,EAAA1V,KACpBA,KAAKC,OAAOiH,SAAS,eAEnByO,SAAUF,EACVG,KAAM,SAACC,GACLH,EAAKI,iBAAiBD,OAI5BC,iBAVO,SAUUD,GAAO,IAAAE,EAAA/V,KACtB6V,EAAM3T,QAAQ,SAAA8T,GACZ,IAAIrB,EAASoB,EAAKtB,QAAQhU,KAAK,SAAAkU,GAC7B,OAAOA,EAAOE,UAAYmB,EAAKnB,UAE9BF,IACDA,EAAOxT,OAAS6U,EAAK7U,OACrBwT,EAAOG,MAAQH,EAAOM,YAAce,EAAKxO,SAI/CyO,cArBO,SAqBOC,EAAGpP,GACf9G,KAAKgU,YAAchU,KAAKgU,YAE1BmC,OAxBO,SAwBAD,EAAGvB,GAAQ,IAAAyB,EAAApW,KAChBA,KAAKC,OAAOiH,SAAS,eACrBlH,KAAKC,OAAOiH,SAAS,wBACnBmP,aAAc,oBACdC,SACE1C,OAAQ5T,KAAK4T,OACb+B,UAAWhB,EAAOE,SAClBe,KAAM,SAACW,EAAOlW,GACZ+V,EAAKI,OAAO,QACZJ,EAAKnW,OAAOiH,SAAS,mBAI3BgP,EAAEO,cAAe,EACjBP,EAAEQ,kBAEJC,cAxCO,SAwCOhC,GACZiC,SAAShR,KAAO5F,KAAK6T,SAAL,oBAAoCc,EAAOzJ,GAA3C,cAAgEyJ,EAAOE,YC7J9EgC,GADEzO,OAFjB,WAA0B,IAAAC,EAAArI,KAAasI,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,YAAAC,OAA+BmO,aAAAzO,EAAAwL,WAAAxL,EAAAyL,eAAgDzL,EAAAkN,sBAAAlN,EAAAyL,YAAAtL,EAAA,KAAwDE,YAAA,WAAAhC,OAA8Bd,KAAA,gBAAAyC,EAAAuL,UAAqCpL,EAAA,OAAYE,YAAA,SAAAhC,OAA4BzB,IAAA,iEAAA8R,IAAA,MAAiF1O,EAAAY,GAAA,KAAAT,EAAA,QAAAH,EAAAY,GAAA,UAAAZ,EAAAc,KAAAd,EAAAY,GAAA,KAAAZ,EAAAsB,GAAAtB,EAAA,0BAAAsM,GAA8G,OAAAnM,EAAA,KAAe2C,IAAAwJ,EAAAE,QAAAnM,YAAA,WAAAY,IAA8CC,MAAA,SAAAC,GAAyBnB,EAAAsO,cAAAhC,OAA4BnM,EAAA,OAAYE,YAAA,kBAAAhC,OAAqCzB,IAAA0P,EAAAxT,UAAqBkH,EAAAY,GAAA,KAAAZ,EAAA2L,YAAA,SAAAW,EAAAxV,MAAAwV,EAAAE,SAAAxM,EAAApI,OAAAC,MAAAoB,QAAAkH,EAAA,QAA8GE,YAAA,SAAAY,IAAyBC,MAAA,SAAAC,GAAyBnB,EAAA8N,OAAA3M,EAAAmL,OAA6BtM,EAAAc,KAAAd,EAAAY,GAAA,gBAAA0L,EAAAxV,KAAAqJ,EAAA,QAA6DG,MAAA,YAAAgM,EAAAxV,KAAA,oBAAmDkJ,EAAAc,KAAAd,EAAAY,GAAA,KAAAT,EAAA,QAAAH,EAAAY,GAAAZ,EAAAa,GAAAyL,EAAAG,cAAmEzM,EAAAY,GAAA,KAAAZ,EAAAwL,SAAmgBxL,EAAAc,MAAngBX,EAAA,KAAuCE,YAAA,WAAAhC,OAA8Bd,KAAA,gBAAAyC,EAAAuL,UAAqCpL,EAAA,OAAYE,YAAA,SAAAhC,OAA4BzB,IAAA,iEAAA8R,IAAA,MAAiF1O,EAAAY,GAAA,KAAAT,EAAA,QAAAH,EAAAY,GAAA,UAAAZ,EAAAY,GAAA,KAAAZ,EAAA,oBAAAG,EAAA,OAA0FE,YAAA,WAAAY,IAA2BC,MAAA,SAAAC,GAAyBnB,EAAA4N,oBAAsBzN,EAAA,OAAYE,YAAA,SAAAhC,OAA4BzB,IAAA,oEAAA8R,IAAA,MAAoF1O,EAAAY,GAAA,KAAAT,EAAA,QAAAH,EAAAY,GAAA,UAAAZ,EAAAc,OAAA,IAErjDe,oBCCjB,IAcA8M,EAdyB5M,EAAQ,OAcjCC,CACEsJ,EACAkD,GATF,EAVA,SAAAvM,GACEF,EAAQ,SAaV,kBAEA,MAUemB,EAAA,EAAAyL,EAAiB","file":"static/js/0.f70f334acab9146506fa.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport util from '../../utils'\nimport config from '../../configs'\nimport emojiObj from '../../configs/emoji'\n\nexport default {\n  props: {\n    type: String, // 类型，chatroom, session\n    rawMsg: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    userInfos: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    myInfo: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    isRobot: {\n      type: Boolean,\n      default () {\n        return false\n      }\n    },\n    isHistory: {\n      type: Boolean,\n      default() {\n        return false\n      }\n    }\n    // robotInfos: {\n    //   type: Object,\n    //   default () {\n    //     return {}\n    //   }\n    // }\n  },\n  data () {\n    return {\n      msg: '',\n      isFullImgShow: false,\n      currentAudio: null\n    }\n  },\n  computed: {\n    robotInfos () {\n      return this.$store.state.robotInfos\n    },\n    teamMsgUnRead() {\n      var obj = !this.isHistory\n      && this.msg.needMsgReceipt\n      && this.msg.flow==='out'\n      && this.$store.state.teamMsgReads.find(item => item.idServer === this.msg.idServer)\n\n      return obj ? parseInt(obj.unread) : -1\n    }\n  },\n  beforeMount () {\n    let item = Object.assign({}, this.rawMsg)\n    // 标记用户，区分聊天室、普通消息\n    if (this.type === 'session') {\n\n      if (item.flow === 'in') {\n        if (item.type === 'robot' && item.content && item.content.msgOut) {\n          // 机器人下行消息\n          let robotAccid = item.content.robotAccid\n          item.avatar = this.robotInfos[robotAccid].avatar\n          item.isRobot = true\n          item.link = `#/namecard/${robotAccid}`\n        } else if (item.from !== this.$store.state.userUID) {\n          item.avatar = (this.userInfos[item.from] && this.userInfos[item.from].avatar) || config.defaultUserIcon\n          item.link = `#/namecard/${item.from}`\n          //todo  如果是未加好友的人发了消息，是否能看到名片\n        } else {\n          item.avatar = this.myInfo.avatar\n        }\n      } else if (item.flow === 'out') {\n        item.avatar = this.myInfo.avatar\n      }\n    } else {\n      // 标记时间，聊天室中\n      item.showTime = util.formatDate(item.time)\n    }\n    if (item.type === 'timeTag') {\n      // 标记发送的时间\n      item.showText = item.text\n    } else if (item.type === 'text') {\n      // 文本消息\n      item.showText = util.escape(item.text)\n      if (/\\[[^\\]]+\\]/.test(item.showText)) {\n        let emojiItems = item.showText.match(/\\[[^\\]]+\\]/g)\n        emojiItems.forEach(text => {\n          let emojiCnt = emojiObj.emojiList.emoji\n          if (emojiCnt[text]) {\n            item.showText = item.showText.replace(text, `<img class=\"emoji-small\" src=\"${emojiCnt[text].img}\">`)\n          }\n        })\n      }\n    } else if (item.type === 'custom') {\n      let content = JSON.parse(item.content)\n      // type 1 为猜拳消息\n      if (content.type === 1) {\n        let data = content.data\n        let resourceUrl = config.resourceUrl\n        // item.showText = `<img class=\"emoji-middle\" src=\"${resourceUrl}/im/play-${data.value}.png\">`\n        item.type = 'custom-type1'\n        item.imgUrl = `${resourceUrl}/im/play-${data.value}.png`\n      // type 3 为贴图表情\n      } else if (content.type === 3) {\n        let data = content.data\n        let emojiCnt = ''\n        if (emojiObj.pinupList[data.catalog]) {\n          emojiCnt = emojiObj.pinupList[data.catalog][data.chartlet]\n          // item.showText = `<img class=\"emoji-big\" src=\"${emojiCnt.img}\">`\n          item.type = 'custom-type3'\n          item.imgUrl = `${emojiCnt.img}`\n        }\n      } else {\n        item.showText = util.parseCustomMsg(item)\n        if (item.showText !== '[自定义消息]') {\n          item.showText += ',请到手机或电脑客户端查看'\n        }\n      }\n    } else if (item.type === 'image') {\n      // 原始图片全屏显示\n      item.originLink = item.file.url\n    } else if (item.type === 'video') {\n      // ...\n    } else if (item.type === 'audio') {\n      item.audioSrc = item.file.mp3Url\n      item.showText = Math.round(item.file.dur / 1000) + '\" 点击播放'\n    } else if (item.type === 'file') {\n      item.fileLink = item.file.url\n      item.showText = item.file.name\n    } else if (item.type === 'notification') {\n      if (item.scene === 'team') {\n        item.showText = util.generateTeamSysmMsg(item)\n      } else {\n        //对于系统通知，更新下用户信息的状态\n        item.showText = util.generateChatroomSysMsg(item)\n      }\n    } else if (item.type === 'tip') {\n      //对于系统通知，更新下用户信息的状态\n      item.showText = item.tip\n    } else if (item.type === 'robot') {\n      let content = item.content || {}\n      let message = content.message || []\n      if (!content.msgOut) {\n        // 机器人上行消息\n        item.robotFlow = 'out'\n        item.showText = item.text\n      } else if (content.flag === 'bot') {\n        item.subType = 'bot'\n        message = message.map(item => {\n          if (item.type === 'template') {\n            // 在vuex(store/actions/msgs.js)中已调用sdk方法做了转换\n            return item.content.json\n          } else if (item.type === 'text' || item.type === 'answer') {\n            // 保持跟template结构一致\n            return [{\n              type: 'text',\n              text: item.content\n            }]\n          } else if (item.type === 'image') {\n            // 保持跟template结构一致\n            return [{\n              type: 'image',\n              url: item.content\n            }]\n          }\n        })\n        item.message = message\n      } else if (item.content.flag === 'faq') {\n        item.subType = 'faq'\n        item.query = message.query\n        let match = message.match.sort((a, b) => {\n          // 返回最匹配的答案\n          return b.score - a.score\n        })\n        item.message = match[0]\n      }\n    } else {\n      item.showText = `[${util.mapMsgType(item)}],请到手机或电脑客户端查看`\n    }\n    this.msg = item\n  },\n  mounted () {\n    let item = this.msg\n    // 有时序问题的操作\n    this.$nextTick(() => {\n      let media = null\n      if (item.type === 'image') {\n        // 图片消息缩略图\n        media = new Image()\n        media.src = item.file.url + '?imageView&thumbnail=180x0&quality=85'\n      } else if (item.type === 'custom-type1') {\n        // 猜拳消息\n        media = new Image()\n        media.className = 'emoji-middle'\n        media.src = item.imgUrl\n      } else if (item.type === 'custom-type3') {\n        // 贴图表情\n        media = new Image()\n        media.className = 'emoji-big'\n        media.src = item.imgUrl\n      } else if (item.type === 'video') {\n        if (/(mov|mp4|ogg|webm)/i.test(item.file.ext)) {\n          media = document.createElement('video')\n          media.src = item.file.url\n          media.width = 640\n          media.height = 480\n          media.autoStart = false\n          media.preload = 'metadata'\n          media.controls = 'controls'\n        } else {\n          let aLink = document.createElement('a')\n          aLink.href = item.file.url\n          aLink.target = '_blank'\n          aLink.innerHTML = `<i class=\"u-icon icon-file\"></i>${video.name}`\n          this.$refs.mediaMsg.appendChild(aLink)\n        }\n      }\n      if (media) {\n        if (this.$refs.mediaMsg) {\n          this.$refs.mediaMsg.appendChild(media)\n        }\n        media.onload = () => {\n          this.$emit('msg-loaded')\n        }\n        media.onerror = () => {\n          this.$emit('msg-loaded')\n        }\n      } else {\n        this.$emit('msg-loaded')\n      }\n    }) // end this.nextTick\n  },\n  methods: {\n    revocateMsg (vNode) {\n      // 在会话聊天页\n      if (this.$store.state.currSessionId) {\n        if (vNode && vNode.data && vNode.data.attrs) {\n          let attrs = vNode.data.attrs\n          if (attrs.type === 'robot') {\n            return\n          }\n          // 自己发的消息\n          if (attrs.flow === 'out') {\n            let that = this\n            this.$vux.confirm.show({\n              title: '确定需要撤回消息',\n              onCancel () {\n              },\n              onConfirm () {\n                that.$store.dispatch('revocateMsg', {\n                  idClient: attrs.idClient\n                })\n              }\n            })\n          }\n        }\n      }\n    },\n    sendRobotBlockMsg (msg, originMsg) {\n      if(this.isHistory) {\n        // 在历史消息中，不进行机器人交互\n        return\n      }\n      let body = '[复杂按钮模板触发消息]'\n      if (msg.text && msg.text.length === 1) {\n        body = msg.text[0].text\n      }\n      let robotAccid = originMsg.content.robotAccid\n      if (!this.isRobot) {\n        body = `@${this.robotInfos[robotAccid].nick} ${body}`\n      }\n      if (this.type === 'session') {\n        this.$store.dispatch('sendRobotMsg', {\n          type: 'link',\n          scene: originMsg.scene,\n          to: originMsg.to,\n          robotAccid,\n          // 机器人后台消息\n          params: msg.params,\n          target: msg.target,\n          // 显示的文本消息\n          body\n        })\n      } else if (this.type === 'chatroom') {\n        this.$store.dispatch('sendChatroomRobotMsg', {\n          type: 'link',\n          robotAccid,\n          // 机器人后台消息\n          params: msg.params,\n          target: msg.target,\n          // 显示的文本消息\n          body\n        })\n      }\n    },\n    continueRobotMsg (robotAccid) {\n      this.$store.dispatch('continueRobotMsg', robotAccid)\n    },\n    showFullImg (src) {\n      this.$store.dispatch('showFullscreenImg', {\n        src\n      })\n    },\n    playAudio (src) {\n      if (!this.currentAudio) {\n        this.currentAudio = new Audio(src)\n        this.currentAudio.play()\n        this.currentAudio.onended = () => {\n          this.currentAudio = null\n        }\n      }\n    },\n    toMsgUnReadDetail() {\n      this.href = '#/msgReceiptDetail/' + this.msg.idServer\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/ChatItem.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"u-msg\",class:{\n    'item-me': _vm.msg.flow==='out',\n    'item-you': _vm.msg.flow==='in',\n    'item-time': _vm.msg.type==='timeTag',\n    'item-tip': _vm.msg.type==='tip',\n    'session-chat': _vm.type==='session'\n  }},[(_vm.msg.type==='timeTag')?_c('div',[_vm._v(\"---- \"+_vm._s(_vm.msg.showText)+\" ----\")]):(_vm.msg.type==='tip')?_c('div',{staticClass:\"tip\"},[_vm._v(_vm._s(_vm.msg.showText))]):(_vm.msg.type==='notification' && _vm.msg.scene==='team')?_c('div',{staticClass:\"notification\"},[_vm._v(_vm._s(_vm.msg.showText))]):(_vm.msg.flow==='in' || _vm.msg.flow==='out')?_c('div',{attrs:{\"idClient\":_vm.msg.idClient,\"time\":_vm.msg.time,\"flow\":_vm.msg.flow,\"type\":_vm.msg.type}},[(_vm.msg.avatar)?_c('a',{staticClass:\"msg-head\",attrs:{\"href\":_vm.msg.link}},[_c('img',{staticClass:\"icon u-circle\",attrs:{\"src\":_vm.msg.avatar}})]):(_vm.msg.type!=='notification')?_c('p',{staticClass:\"msg-user\"},[_c('em',[_vm._v(_vm._s(_vm.msg.showTime))]),_vm._v(_vm._s(_vm.msg.from))]):_vm._e(),_vm._v(\" \"),(_vm.msg.type==='text')?_c('span',{staticClass:\"msg-text\",domProps:{\"innerHTML\":_vm._s(_vm.msg.showText)}}):(_vm.msg.type==='custom-type1')?_c('span',{ref:\"mediaMsg\",staticClass:\"msg-text\"}):(_vm.msg.type==='custom-type3')?_c('span',{ref:\"mediaMsg\",staticClass:\"msg-text\"}):(_vm.msg.type==='image')?_c('span',{ref:\"mediaMsg\",staticClass:\"msg-text\",on:{\"click\":function($event){$event.stopPropagation();_vm.showFullImg(_vm.msg.originLink)}}}):(_vm.msg.type==='video')?_c('span',{ref:\"mediaMsg\",staticClass:\"msg-text\"}):(_vm.msg.type==='audio')?_c('span',{staticClass:\"msg-text\",on:{\"click\":function($event){_vm.playAudio(_vm.msg.audioSrc)}}},[_vm._v(_vm._s(_vm.msg.showText))]):(_vm.msg.type==='file')?_c('span',{staticClass:\"msg-text\"},[_c('a',{attrs:{\"href\":_vm.msg.fileLink,\"target\":\"_blank\"}},[_c('i',{staticClass:\"u-icon icon-file\"}),_vm._v(_vm._s(_vm.msg.showText))])]):(_vm.msg.type==='robot')?_c('span',{staticClass:\"msg-text\",class:{'msg-robot': _vm.msg.robotFlow!=='out' && !_vm.isRobot}},[(_vm.msg.robotFlow==='out')?_c('div',[_vm._v(_vm._s(_vm.msg.showText))]):(_vm.msg.subType==='bot')?_c('div',_vm._l((_vm.msg.message),function(tmsgs){return _c('div',_vm._l((tmsgs),function(tmsg){return _c('div',[(tmsg.type==='text')?_c('div',[_c('p',[_vm._v(_vm._s(tmsg.text))])]):(tmsg.type==='image')?_c('div',[_c('p',[_c('img',{attrs:{\"src\":tmsg.url}})])]):(tmsg.type==='url')?_c('div',[_c('a',{class:tmsg.style,attrs:{\"href\":tmsg.target,\"target\":\"_blank\"}},[(tmsg.image)?_c('div',_vm._l((tmsg.image),function(tmsg2){return _c('p',[_c('img',{attrs:{\"src\":tmsg2.url}})])}),0):_vm._e(),_vm._v(\" \"),(tmsg.text)?_c('div',_vm._l((tmsg.text),function(tmsg2){return _c('p',[_vm._v(_vm._s(tmsg2.text))])}),0):_vm._e()])]):(tmsg.type==='block')?_c('div',[_c('a',{class:tmsg.style,attrs:{\"params\":tmsg.params,\"target\":tmsg.target},on:{\"click\":function($event){_vm.sendRobotBlockMsg(tmsg, _vm.msg)}}},[(tmsg.image)?_c('div',_vm._l((tmsg.image),function(tmsg2){return _c('p',[_c('img',{attrs:{\"src\":tmsg2.url}})])}),0):_vm._e(),_vm._v(\" \"),(tmsg.text)?_c('div',_vm._l((tmsg.text),function(tmsg2){return _c('p',[_vm._v(_vm._s(tmsg2.text))])}),0):_vm._e()])]):_vm._e()])}),0)}),0):(_vm.msg.subType==='faq')?_c('div',[_c('p',[_vm._v(_vm._s(_vm.msg.message.answer))])]):_vm._e(),_vm._v(\" \"),(_vm.msg.robotFlow!=='out' && !_vm.isRobot)?_c('span',{staticClass:\"msg-link\"},[_c('a',{staticClass:\"link-right\",on:{\"click\":function($event){_vm.continueRobotMsg(_vm.msg.content.robotAccid)}}},[_vm._v(\"继续对话\")])]):_vm._e()]):(_vm.msg.type==='notification')?_c('span',{staticClass:\"msg-text notify\"},[_vm._v(_vm._s(_vm.msg.showText))]):_c('span',{staticClass:\"msg-text\",domProps:{\"innerHTML\":_vm._s(_vm.msg.showText)}}),_vm._v(\" \"),(_vm.msg.status==='fail')?_c('span',{staticClass:\"msg-failed\"},[_c('i',{staticClass:\"weui-icon-warn\"})]):_vm._e(),_vm._v(\" \"),(_vm.teamMsgUnRead >=0)?_c('a',{staticClass:\"msg-unread\",attrs:{\"href\":(\"#/msgReceiptDetail/\" + (_vm.msg.to) + \"-\" + (_vm.msg.idServer))}},[_vm._v(_vm._s(_vm.teamMsgUnRead>0 ? (_vm.teamMsgUnRead + \"人未读\"): '全部已读'))]):_vm._e()]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-72108d05\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/components/ChatItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-72108d05\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatItem.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-72108d05\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-72108d05\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/components/ChatItem.vue\n// module id = null\n// module chunks = ","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport util from '../../utils'\nimport config from '../../configs'\nimport emojiObj from '../../configs/emoji'\nimport ChatItem from './ChatItem'\n\nexport default {\n  components: {\n    ChatItem\n  },\n  props: {\n    type: String, // 类型，chatroom, session\n    canLoadMore: [String, Boolean],\n    isRobot: {\n      type: Boolean,\n      default () {\n        return false\n      }\n    },\n    msglist: {\n      type: Array,\n      default () {\n        return []\n      }\n    },\n    userInfos: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    myInfo: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    isHistory: {\n      type: Boolean,\n      default() {\n        return false\n      }\n    }\n    // robotInfos: {\n    //   type: Object,\n    //   default () {\n    //     return {}\n    //   }\n    // }\n  },\n  data () {\n    return {\n      isFullImgShow: false,\n      msgLoadedTimer: null\n    }\n  },\n  methods: {\n    showFullImg (src) {\n      this.$store.dispatch('showFullscreenImg', {\n        src\n      })\n    },\n    msgLoaded () {\n      clearTimeout(this.msgLoadedTimer)\n      this.msgLoadedTimer = setTimeout(() => {\n        this.$emit('msgs-loaded')\n      }, 20)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/ChatList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"m-chat-list p-chat-list\",attrs:{\"id\":\"chat-list\"}},[(_vm.canLoadMore)?_c('li',{staticClass:\"u-msg item-time\"},[_vm._v(\"\\n    ---- 上拉加载更多 ----\\n  \")]):_c('li',{staticClass:\"u-msg item-time\"},[_vm._v(\"\\n    ---- 已无更多记录 ----\\n  \")]),_vm._v(\" \"),_vm._l((_vm.msglist),function(msg){return _c('chat-item',{key:msg.idClient,attrs:{\"type\":_vm.type,\"rawMsg\":msg,\"isRobot\":_vm.isRobot,\"userInfos\":_vm.userInfos,\"myInfo\":_vm.myInfo,\"isHistory\":_vm.isHistory},on:{\"msg-loaded\":_vm.msgLoaded}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-30354227\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/components/ChatList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-30354227\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-30354227\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/components/ChatList.vue\n// module id = null\n// module chunks = ","/* 表情原图配置文件 */\nimport config from './index'\n\nlet emojiBaseUrl = `http://yx-web.nosdn.127.net/webdoc/h5/emoji`\n\nlet emojiList = {\n  \"emoji\": {\n    \"[大笑]\":{file:\"emoji_0.png\"},\"[可爱]\":{file:\"emoji_01.png\"},\"[色]\":{file:\"emoji_02.png\"},\"[嘘]\":{file:\"emoji_03.png\"},\"[亲]\":{file:\"emoji_04.png\"},\"[呆]\":{file:\"emoji_05.png\"},\"[口水]\":{file:\"emoji_06.png\"},\"[汗]\":{file:\"emoji_145.png\"},\"[呲牙]\":{file:\"emoji_07.png\"},\"[鬼脸]\":{file:\"emoji_08.png\"},\"[害羞]\":{file:\"emoji_09.png\"},\"[偷笑]\":{file:\"emoji_10.png\"},\"[调皮]\":{file:\"emoji_11.png\"},\"[可怜]\":{file:\"emoji_12.png\"},\"[敲]\":{file:\"emoji_13.png\"},\"[惊讶]\":{file:\"emoji_14.png\"},\"[流感]\":{file:\"emoji_15.png\"},\"[委屈]\":{file:\"emoji_16.png\"},\"[流泪]\":{file:\"emoji_17.png\"},\"[嚎哭]\":{file:\"emoji_18.png\"},\"[惊恐]\":{file:\"emoji_19.png\"},\"[怒]\":{file:\"emoji_20.png\"},\"[酷]\":{file:\"emoji_21.png\"},\"[不说]\":{file:\"emoji_22.png\"},\"[鄙视]\":{file:\"emoji_23.png\"},\"[阿弥陀佛]\":{file:\"emoji_24.png\"},\"[奸笑]\":{file:\"emoji_25.png\"},\"[睡着]\":{file:\"emoji_26.png\"},\"[口罩]\":{file:\"emoji_27.png\"},\"[努力]\":{file:\"emoji_28.png\"},\"[抠鼻孔]\":{file:\"emoji_29.png\"},\"[疑问]\":{file:\"emoji_30.png\"},\"[怒骂]\":{file:\"emoji_31.png\"},\"[晕]\":{file:\"emoji_32.png\"},\"[呕吐]\":{file:\"emoji_33.png\"},\"[拜一拜]\":{file:\"emoji_160.png\"},\"[惊喜]\":{file:\"emoji_161.png\"},\"[流汗]\":{file:\"emoji_162.png\"},\"[卖萌]\":{file:\"emoji_163.png\"},\"[默契眨眼]\":{file:\"emoji_164.png\"},\"[烧香拜佛]\":{file:\"emoji_165.png\"},\"[晚安]\":{file:\"emoji_166.png\"},\"[强]\":{file:\"emoji_34.png\"},\"[弱]\":{file:\"emoji_35.png\"},\"[OK]\":{file:\"emoji_36.png\"},\"[拳头]\":{file:\"emoji_37.png\"},\"[胜利]\":{file:\"emoji_38.png\"},\"[鼓掌]\":{file:\"emoji_39.png\"},\"[握手]\":{file:\"emoji_200.png\"},\"[发怒]\":{file:\"emoji_40.png\"},\"[骷髅]\":{file:\"emoji_41.png\"},\"[便便]\":{file:\"emoji_42.png\"},\"[火]\":{file:\"emoji_43.png\"},\"[溜]\":{file:\"emoji_44.png\"},\"[爱心]\":{file:\"emoji_45.png\"},\"[心碎]\":{file:\"emoji_46.png\"},\"[钟情]\":{file:\"emoji_47.png\"},\"[唇]\":{file:\"emoji_48.png\"},\"[戒指]\":{file:\"emoji_49.png\"},\"[钻石]\":{file:\"emoji_50.png\"},\"[太阳]\":{file:\"emoji_51.png\"},\"[有时晴]\":{file:\"emoji_52.png\"},\"[多云]\":{file:\"emoji_53.png\"},\"[雷]\":{file:\"emoji_54.png\"},\"[雨]\":{file:\"emoji_55.png\"},\"[雪花]\":{file:\"emoji_56.png\"},\"[爱人]\":{file:\"emoji_57.png\"},\"[帽子]\":{file:\"emoji_58.png\"},\"[皇冠]\":{file:\"emoji_59.png\"},\"[篮球]\":{file:\"emoji_60.png\"},\"[足球]\":{file:\"emoji_61.png\"},\"[垒球]\":{file:\"emoji_62.png\"},\"[网球]\":{file:\"emoji_63.png\"},\"[台球]\":{file:\"emoji_64.png\"},\"[咖啡]\":{file:\"emoji_65.png\"},\"[啤酒]\":{file:\"emoji_66.png\"},\"[干杯]\":{file:\"emoji_67.png\"},\"[柠檬汁]\":{file:\"emoji_68.png\"},\"[餐具]\":{file:\"emoji_69.png\"},\"[汉堡]\":{file:\"emoji_70.png\"},\"[鸡腿]\":{file:\"emoji_71.png\"},\"[面条]\":{file:\"emoji_72.png\"},\"[冰淇淋]\":{file:\"emoji_73.png\"},\"[沙冰]\":{file:\"emoji_74.png\"},\"[生日蛋糕]\":{file:\"emoji_75.png\"},\"[蛋糕]\":{file:\"emoji_76.png\"},\"[糖果]\":{file:\"emoji_77.png\"},\"[葡萄]\":{file:\"emoji_78.png\"},\"[西瓜]\":{file:\"emoji_79.png\"},\"[光碟]\":{file:\"emoji_80.png\"},\"[手机]\":{file:\"emoji_81.png\"},\"[电话]\":{file:\"emoji_82.png\"},\"[电视]\":{file:\"emoji_83.png\"},\"[声音开启]\":{file:\"emoji_84.png\"},\"[声音关闭]\":{file:\"emoji_85.png\"},\"[铃铛]\":{file:\"emoji_86.png\"},\"[锁头]\":{file:\"emoji_87.png\"},\"[放大镜]\":{file:\"emoji_88.png\"},\"[灯泡]\":{file:\"emoji_89.png\"},\"[锤头]\":{file:\"emoji_90.png\"},\"[烟]\":{file:\"emoji_91.png\"},\"[炸弹]\":{file:\"emoji_92.png\"},\"[枪]\":{file:\"emoji_93.png\"},\"[刀]\":{file:\"emoji_94.png\"},\"[药]\":{file:\"emoji_95.png\"},\"[打针]\":{file:\"emoji_96.png\"},\"[钱袋]\":{file:\"emoji_97.png\"},\"[钞票]\":{file:\"emoji_98.png\"},\"[银行卡]\":{file:\"emoji_99.png\"},\"[手柄]\":{file:\"emoji_100.png\"},\"[麻将]\":{file:\"emoji_101.png\"},\"[调色板]\":{file:\"emoji_102.png\"},\"[电影]\":{file:\"emoji_103.png\"},\"[麦克风]\":{file:\"emoji_104.png\"},\"[耳机]\":{file:\"emoji_105.png\"},\"[音乐]\":{file:\"emoji_106.png\"},\"[吉他]\":{file:\"emoji_107.png\"},\"[火箭]\":{file:\"emoji_108.png\"},\"[飞机]\":{file:\"emoji_109.png\"},\"[火车]\":{file:\"emoji_110.png\"},\"[公交]\":{file:\"emoji_111.png\"},\"[轿车]\":{file:\"emoji_112.png\"},\"[出租车]\":{file:\"emoji_113.png\"},\"[警车]\":{file:\"emoji_114.png\"},\"[自行车]\":{file:\"emoji_115.png\"}\n  }\n}\n\nfor (let emoji in emojiList) {\n  let emojiItem = emojiList[emoji]\n  for (let key in emojiItem) {\n    let item = emojiItem[key]\n    item.img = `${emojiBaseUrl}/${emoji}/${item.file}`\n  }\n}\n\nlet pinupList = {\n  'ajmd':{},\n  'xxy': {},\n  'lt': {}\n}\n\nfor (let i = 1; i <= 48; i++) {\n  let key = 'ajmd0'+ (i >= 10 ? i: '0' + i)\n  pinupList['ajmd'][key] = {file: key + '.png'}\n}\nfor (let i = 1; i <= 40; i++) {\n  let key = 'xxy0'+ (i >= 10 ? i: '0' + i)\n  pinupList['xxy'][key] = {file: key + '.png'}\n}\nfor (let i = 1; i <= 20; i++) {\n  let key = 'lt0'+ (i >= 10 ? i: '0' + i)\n  pinupList['lt'][key] = {file: key + '.png'}\n}\n\nfor (let emoji in pinupList) {\n  let emojiItem = pinupList[emoji]\n  for (let key in emojiItem) {\n    let item = emojiItem[key]\n    item.img = `${emojiBaseUrl}/${emoji}/${item.file}`\n  }\n}\n\nexport default {\n  emojiList,\n  pinupList\n}\n\n\n// WEBPACK FOOTER //\n// ./src/configs/emoji.js","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    teamId: {\n      type: String,\n    },\n    // 是否为高级群\n    advanced: {\n      type: Boolean,\n      default: false\n    },\n    // 显示全部群成员模式\n    showAllMode: {\n      type: Boolean,\n      default: false\n    },\n    filterAccount: {\n      type: Array\n      // [account1, account2]。 若设置了，则只显示该数组中的群成员, 应用场景：群消息回执中, 对已读未读进行了分组。\n    }\n  },\n  data(){\n    return {\n      removeMode: false,\n      hasManagePermission: false,\n      hasSearched: false\n    }\n  },\n  mounted(){\n    // 防止在此页面直接刷新，此时需要获取群成员\n    var teamMembers = this.$store.state.teamMembers[this.teamId]\n    if (teamMembers === undefined) {\n      this.$store.dispatch('getTeamMembers', this.teamId)\n    }\n  },\n  computed: {\n    teamInfo() {\n      var teamList = this.$store.state.teamlist\n      var team =  teamList && teamList.find(team=>{\n        return team.teamId === this.teamId\n      })\n      if(!team) {\n        return undefined\n      }\n      return team\n    },\n    members() {\n      var members = this.$store.state.teamMembers[this.teamId]\n      var userInfos = this.$store.state.userInfos\n      var needSearchAccounts = []\n      if (members) {\n        members = members.map( item => {\n          var member = Object.assign({}, item) //重新创建一个对象，用于存储展示数据，避免对vuex数据源的修改\n          member.valid = true //被管理员移除后，标记为false\n          if (member.account === this.$store.state.userUID) {\n            member.alias = '我'\n            member.avatar = this.$store.state.myInfo.avatar\n            this.isOwner = member.type === 'owner'\n            this.hasManagePermission = member.type !== 'normal'\n          } else if (userInfos[member.account] === undefined) {\n            needSearchAccounts.push(member.account)\n            member.avatar = member.avatar || this.avatar\n            member.alias = member.nickInTeam || member.account\n          } else {\n            member.avatar = userInfos[member.account].avatar\n            member.alias = member.nickInTeam ||userInfos[member.account].nick\n          }\n          return member\n        })\n        if (needSearchAccounts.length>0 && !this.hasSearched) {\n          this.hasSearched = true\n          while(needSearchAccounts.length>0) {\n            this.searchUsers(needSearchAccounts.splice(0, 150))\n          }\n        }\n        return members\n      }\n      return []\n    },\n    membersInDisplay() {\n      if (this.filterAccount) {\n        return this.members.filter(member=>{\n          return !!this.filterAccount.find(account => account === member.account)\n        })\n      } else if(this.advanced || this.showAllMode) {\n        return this.members\n      } else {\n        return this.members.slice(0, this.hasInvitePermission ? 3 : 4)\n      }\n    },\n    hasInvitePermission() {\n      return this.advanced && (this.hasManagePermission || (this.teamInfo&&this.teamInfo.inviteMode === \"all\"))\n    }\n  },\n  methods: {\n    searchUsers(Accounts) {\n      this.$store.dispatch('searchUsers',\n      {\n        accounts: Accounts,\n        done: (users) => {\n          this.updateTeamMember(users)\n        }\n      })\n    },\n    updateTeamMember(users) {\n      users.forEach(user =>{\n        var member = this.members.find(member=>{\n          return member.account === user.account\n        })\n        if(member) {\n          member.avatar = user.avatar\n          member.alias = member.nickInTeam || user.nick\n        }\n      })\n    },\n    triggerRemove(e, show) {\n      this.removeMode = !this.removeMode\n    },\n    remove(e, member) {\n      this.$store.dispatch('showLoading')\n      this.$store.dispatch('delegateTeamFunction', {\n        functionName: 'removeTeamMembers',\n        options: {\n          teamId: this.teamId,\n          accounts: [member.account],\n          done: (error, obj)=>{\n            this.$toast('移除成功')\n            this.$store.dispatch('hideLoading')\n          }\n        }\n      })\n      e.cancelBubble = true\n      e.preventDefault()\n    },\n    onMemberClick(member){\n      location.href = this.advanced ? `#/teammembercard/${member.id}` : `#/namecard/${member.account}`\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/components/TeamMember.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-members\",class:{\"s-bg-white\": _vm.advanced && !_vm.showAllMode}},[(_vm.hasInvitePermission && !_vm.showAllMode)?_c('a',{staticClass:\"u-member\",attrs:{\"href\":\"#/teaminvite/\" + _vm.teamId}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":\"http://yx-web.nos.netease.com/webdoc/h5/im/team_member_add.png\",\"alt\":\"\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"添加\")])]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.membersInDisplay),function(member){return _c('a',{key:member.account,staticClass:\"u-member\",on:{\"click\":function($event){_vm.onMemberClick(member)}}},[_c('img',{staticClass:\"avatar u-circle\",attrs:{\"src\":member.avatar}}),_vm._v(\" \"),(_vm.removeMode && member.type!=\"owner\" && member.account!=_vm.$store.state.userUID)?_c('span',{staticClass:\"remove\",on:{\"click\":function($event){_vm.remove($event, member)}}}):_vm._e(),_vm._v(\" \"),(member.type !== \"normal\")?_c('span',{class:member.type === \"manager\"? \"manager\":\"owner\"}):_vm._e(),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(member.alias))])])}),_vm._v(\" \"),(!_vm.advanced)?[_c('a',{staticClass:\"u-member\",attrs:{\"href\":\"#/teaminvite/\" + _vm.teamId}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":\"http://yx-web.nos.netease.com/webdoc/h5/im/team_member_add.png\",\"alt\":\"\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"添加\")])]),_vm._v(\" \"),(_vm.hasManagePermission)?_c('div',{staticClass:\"u-member\",on:{\"click\":function($event){_vm.triggerRemove()}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":\"http://yx-web.nos.netease.com/webdoc/h5/im/team_member_delete.png\",\"alt\":\"\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"移除\")])]):_vm._e()]:_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d6a9e348\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/components/TeamMember.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d6a9e348\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TeamMember.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TeamMember.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TeamMember.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d6a9e348\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TeamMember.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d6a9e348\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/components/TeamMember.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}