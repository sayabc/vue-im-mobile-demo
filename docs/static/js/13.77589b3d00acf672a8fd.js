webpackJsonp([13],{"0I3o":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("woOf"),n=a.n(s),i=a("moKT"),r=(a("0xDb"),{data:function(){return{avatar:i.a.defaultUserIcon,teamId:"",account:"",mute:!1,selfType:"normal"}},computed:{member:function(){var t=this,e=/(\d+)-(\w+)/.exec(this.$route.params.member),a=e[1];this.teamId=a;var s=e[2];this.account=s;var i={};this.$store.state.teamMembers[a]&&this.$store.state.teamMembers[a].forEach(function(e){e.account===s&&(i=n()(i,e)),e.account===t.$store.state.userUID&&(t.selfType=e.type)});var r=this.$store.state.userInfos[i.account];return i.account===this.$store.state.userUID&&(r=this.$store.state.myInfo),i.avatar=r?r.avatar:i.avatar||this.avatar,i.alias=r?r.nick:i.account||"account",this.mute=!!i.mute,i},memberType:function(){if(this.member)switch(this.member.type){case"owner":return"群主";case"manager":return"管理员";case"normal":return"普通成员"}return"普通成员"},infoInTeam:function(){return{nickInTeam:this.member.nickInTeam,memberType:this.member.type}},hasSetMemberTypePermission:function(){return"owner"===this.selfType&&"owner"!==this.member.type},hasMuteOrRemovePermission:function(){return"owner"===this.selfType?"owner"!==this.member.type:"manager"===this.selfType&&"normal"===this.member.type},isSelf:function(){return this.member.account===this.$store.state.userUID},hasSetNickPermission:function(){return"normal"!==this.selfType||this.isSelf}},methods:{changeMute:function(){var t=this;this.$store.dispatch("delegateTeamFunction",{functionName:"updateMuteStateInTeam",options:{teamId:this.teamId,account:this.account,mute:this.mute,done:function(e,a){e?t.$toast(e):t.$toast(t.mute?"已禁言":"已取消禁言")}}})},getUpdateCallBcak:function(){var t=this,e=this.member.account,a=this.$store,s=(this.$toast,function(e,s){e?t.$toast(e):(t.$toast("更改成功"),setTimeout(function(){history.go(-1)},200)),a.dispatch("hideLoading")});return function(t,i,r){a.dispatch("showLoading");var o=null,c={};"nickInTeam"===i?(o="updateNickInTeam",c.account=e,c.nickInTeam=r):"memberType"===i&&(o="manager"===r?"addTeamManagers":"removeTeamManagers",c.accounts=[e]),a.dispatch("delegateTeamFunction",{functionName:o,options:n()({teamId:t,done:s},c)})}},onEditItemClick:function(t,e,a,s){var n=this.isSelf&&"nickInTeam"===a;this.$store.dispatch("enterSettingPage",{title:t,inputType:e,updateKey:a,teamId:this.teamId,updateInfoInTeam:!!n,defaultValue:this.infoInTeam[a],confirmCallback:n?null:s,enable:!0})},remove:function(){var t=this;this.$store.dispatch("showLoading"),this.$store.dispatch("delegateTeamFunction",{functionName:"removeTeamMembers",options:{teamId:this.teamId,accounts:[this.member.account],done:function(e,a){t.$toast(e||"移除成功"),history.go(-1),t.$store.dispatch("hideLoading")}}})}}}),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-inherit m-article p-membercard"},[a("x-header",{staticClass:"m-tab",attrs:{"left-options":{backText:" "}}},[a("h1",{staticClass:"m-tab-top"},[t._v("群名片")]),t._v(" "),a("a",{attrs:{slot:"left"},slot:"left"})]),t._v(" "),a("div",{staticClass:"g-body"},[a("div",{staticClass:"g-avatar"},[a("img",{staticClass:"icon u-circle",attrs:{slot:"icon",width:"50",height:"50",src:t.member&&t.member.avatar},slot:"icon"}),t._v(" "),a("div",[t._v(t._s(t.member&&t.member.alias))])]),t._v(" "),a("group",{staticClass:"m-group"},[a("cell",{attrs:{title:"群昵称",value:t.member.nickInTeam||"未设置","is-link":""},nativeOn:{click:function(e){return t.hasSetNickPermission?t.onEditItemClick("修改群昵称","text","nickInTeam",t.getUpdateCallBcak()):t.$toast("无权限")}}}),t._v(" "),a("cell",{attrs:{title:"身份",value:t.memberType,"is-link":""},nativeOn:{click:function(e){return t.hasSetMemberTypePermission?t.onEditItemClick("身份","select","memberType",t.getUpdateCallBcak()):t.$toast("无权限")}}}),t._v(" "),t.hasMuteOrRemovePermission?a("x-switch",{staticClass:"u-switch",attrs:{title:"设置禁言"},on:{"on-change":t.changeMute},model:{value:t.mute,callback:function(e){t.mute=e},expression:"mute"}}):t._e()],1),t._v(" "),t.hasMuteOrRemovePermission?a("x-button",{staticClass:"u-btn",attrs:{mini:"",type:"warn"},nativeOn:{click:function(e){return t.remove(e)}}},[t._v("移出本群")]):t._e()],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,o,!1,function(t){a("9KeE")},"data-v-39a72f79",null);e.default=c.exports},"9KeE":function(t,e){}});
//# sourceMappingURL=13.77589b3d00acf672a8fd.js.map