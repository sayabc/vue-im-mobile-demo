webpackJsonp([7],{qKFa:function(t,s){},qtiN:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("0xDb"),a=e("moKT"),i={data:function(){return{delSessionId:null,stopBubble:!1,noticeIcon:a.a.noticeIcon,myPhoneIcon:a.a.myPhoneIcon,myGroupIcon:a.a.defaultGroupIcon,myAdvancedIcon:a.a.defaultAdvancedIcon}},computed:{sysMsgUnread:function(){var t=this.$store.state.sysMsgUnread,s=t.addFriend||0;return s+=t.team||0,s+this.$store.state.customSysMsgUnread},userInfos:function(){return this.$store.state.userInfos},myInfo:function(){return this.$store.state.myInfo},myPhoneId:function(){return""+this.$store.state.userUID},sessionlist:function(){var t=this,s=this.$store.state.sessionlist.filter(function(s){if(s.name="",s.avatar="","p2p"===s.scene){var e=null;if(s.to===t.myPhoneId)return!1;(e=t.userInfos[s.to])&&(s.name=n.a.getFriendAlias(e),s.avatar=e.avatar)}else if("team"===s.scene){var a;(a=t.$store.state.teamlist.find(function(t){return t.teamId===s.to}))?(s.name=a.name,s.avatar=a.avatar||("normal"===a.type?t.myGroupIcon:t.myAdvancedIcon)):(s.name="群"+s.to,s.avatar=s.avatar||t.myGroupIcon)}var i=s.lastMsg||{};return"text"===i.type?s.lastMsgShow=i.text||"":"custom"===i.type?s.lastMsgShow=n.a.parseCustomMsg(i):"team"===i.scene&&"notification"===i.type?s.lastMsgShow=n.a.generateTeamSysmMsg(i):n.a.mapMsgType(i)?s.lastMsgShow="["+n.a.mapMsgType(i)+"]":s.lastMsgShow="",s.updateTime&&(s.updateTimeShow=n.a.formatDate(s.updateTime,!0)),s});return s}},methods:{enterSysMsgs:function(){this.hideDelBtn()||(location.href="#/sysmsgs")},enterChat:function(t){this.hideDelBtn()||t&&t.id&&(location.href="#/chat/"+t.id)},enterMyChat:function(){location.href="#/chat/p2p-"+this.myPhoneId},deleteSession:function(){null!==this.delSessionId&&this.$store.dispatch("deleteSession",this.delSessionId)},showDelBtn:function(t){var s=this;t&&t.data&&t.data.attrs&&(this.delSessionId=t.data.attrs.sessionId,this.stopBubble=!0,setTimeout(function(){s.stopBubble=!1},20))},hideDelBtn:function(){return null!==this.delSessionId&&!this.stopBubble&&(this.delSessionId=null,!0)}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"g-inherit m-main p-session"},[e("group",{staticClass:"u-list"},[e("cell",{staticClass:"u-list-item",attrs:{title:"消息中心"},nativeOn:{click:function(s){return t.enterSysMsgs(s)}}},[e("img",{staticClass:"icon",attrs:{slot:"icon",width:"24",src:t.noticeIcon},slot:"icon"}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.sysMsgUnread>0,expression:"sysMsgUnread > 0"}],staticClass:"u-unread"},[t._v(t._s(t.sysMsgUnread))])]),t._v(" "),e("cell",{staticClass:"u-list-item",attrs:{title:"我的手机"},nativeOn:{click:function(s){return t.enterMyChat(s)}}},[e("img",{staticClass:"icon",attrs:{slot:"icon",width:"24",src:t.myPhoneIcon},slot:"icon"})]),t._v(" "),t._l(t.sessionlist,function(s){return e("cell",{key:s.id,staticClass:"u-list-item",attrs:{title:s.name,"inline-desc":s.lastMsgShow,sessionId:s.id},nativeOn:{click:function(e){t.enterChat(s)}}},[e("img",{staticClass:"icon u-circle",attrs:{slot:"icon",width:"24",src:s.avatar},slot:"icon"}),t._v(" "),e("span",{staticClass:"u-session-time"},[t._v("\n        "+t._s(s.updateTimeShow)+"\n      ")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:s.unread>0,expression:"session.unread > 0"}],staticClass:"u-unread"},[t._v(t._s(s.unread))]),t._v(" "),e("span",{staticClass:"u-tag-del",class:{active:t.delSessionId===s.id},on:{click:t.deleteSession}})])})],2)],1)},staticRenderFns:[]};var r=e("VU/8")(i,o,!1,function(t){e("qKFa")},null,null);s.default=r.exports}});
//# sourceMappingURL=7.35ec50d1ac14cbb099af.js.map