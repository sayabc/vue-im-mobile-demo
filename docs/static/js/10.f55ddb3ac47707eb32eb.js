webpackJsonp([10],{fTur:function(t,s){},meTn:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=e("ClMD"),n=e("0xDb"),i=e("4NmY"),r=(o.a,{beforeMount:function(){this.$store.state.isRefresh&&(location.href="#/chat/"+this.sessionId)},mounted:function(){this.$store.dispatch("resetNoMoreHistoryMsgs"),this.getHistoryMsgs()},updated:function(){var t=i.a.getChatListHeight();i.a.scrollChatListDown(t-this.currPagePos),this.currPagePos=t},components:{ChatList:o.a},data:function(){return{leftBtnOptions:{backText:" ",preventGoBack:!0},currPagePos:0}},computed:{sessionId:function(){return this.$route.params.sessionId},sessionName:function(){var t=this.sessionId,s=null;if(/^p2p-/.test(t)){if((s=t.replace(/^p2p-/,""))===this.$store.state.userUID)return"我的手机";if(this.isRobot)return this.robotInfos[s].nick||s;var e=this.userInfos[s]||{};return n.a.getFriendAlias(e)}if(/^team-/.test(t))return"历史记录"},isRobot:function(){var t=this.sessionId,s=null;return!(!/^p2p-/.test(t)||(s=t.replace(/^p2p-/,""),!this.robotInfos[s]))},myInfo:function(){return this.$store.state.myInfo},userInfos:function(){return this.$store.state.userInfos},msglist:function(){return this.$store.state.currSessionMsgs},robotInfos:function(){return this.$store.state.robotInfos},scene:function(){return n.a.parseSession(this.sessionId).scene},to:function(){return n.a.parseSession(this.sessionId).to},canLoadMore:function(){return!this.$store.state.noMoreHistoryMsgs}},methods:{getHistoryMsgs:function(){this.canLoadMore&&this.$store.dispatch("getHistoryMsgs",{scene:this.scene,to:this.to})},loadMore:function(){i.a.getChatListScroll()<=5&&this.getHistoryMsgs()},onClickBack:function(){window.history.go(-1)}}}),a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"g-inherit m-article p-chat-history"},[e("x-header",{staticClass:"m-tab",attrs:{"left-options":t.leftBtnOptions},on:{"on-click-back":t.onClickBack}},[e("h1",{staticClass:"m-tab-top"},[t._v(t._s(t.sessionName))]),t._v(" "),e("a",{attrs:{slot:"left"},slot:"left"})]),t._v(" "),e("div",{staticClass:"m-chat-main"},[e("chat-list",{ref:"chatlist",attrs:{type:"session",canLoadMore:t.canLoadMore,msglist:t.msglist,userInfos:t.userInfos,myInfo:t.myInfo,isHistory:!0}})],1)],1)},staticRenderFns:[]};var c=e("VU/8")(r,a,!1,function(t){e("fTur")},"data-v-6cb848d4",null);s.default=c.exports}});
//# sourceMappingURL=10.f55ddb3ac47707eb32eb.js.map